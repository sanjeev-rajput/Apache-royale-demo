/**
 * Generated by Apache Royale Compiler from views/actionitemviews/ai/AiMain.mxml
 * views.actionitemviews.ai.AiMain
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('views.actionitemviews.ai.AiMain');
/* Royale Dependency List: com.unhurdle.spectrum.ActionGroup,com.unhurdle.spectrum.ActionButton,org.apache.royale.jewel.supportClasses.scrollbar.ScrollingViewport,org.apache.royale.jewel.HGroup,com.unhurdle.spectrum.TextField,org.apache.royale.jewel.ImageIcon,com.model.ServiceLoader,com.util.AsJsUtil,org.apache.royale.events.Event,org.apache.royale.events.KeyboardEvent,org.apache.royale.events.MouseEvent,org.apache.royale.html.elements.Span,views.actionitemviews.ai.ChatBot,XML*/

goog.require('org.apache.royale.jewel.VGroup');



/**
 * @constructor
 * @extends {org.apache.royale.jewel.VGroup}
 */
views.actionitemviews.ai.AiMain = function() {
  views.actionitemviews.ai.AiMain.base(this, 'constructor');
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.ActionGroup}
   */
  this.actionBtnGrp_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.ActionButton}
   */
  this.mdl1_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.ActionButton}
   */
  this.mdl2_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.ActionButton}
   */
  this.mdl3_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.VGroup}
   */
  this.chatCtr_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.supportClasses.scrollbar.ScrollingViewport}
   */
  this.$ID_13_0;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.HGroup}
   */
  this.qryCtr_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.TextField}
   */
  this.txtPrompt_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.TextField}
   */
  this.imgUrl_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.ImageIcon}
   */
  this.btnQry_;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldd;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldp;

  this.generateMXMLAttributes([
    5,
    'percentWidth',
    true,
    100.0,
    'percentHeight',
    true,
    100.0,
    'itemsHorizontalAlign',
    true,
    'itemsCenter',
    'itemsVerticalAlign',
    true,
    'itemsCenter',
    'gap',
    true,
    1,
    0,
    1,
    'initComplete',
    this.$EH_13_0
  ]);
  
};
goog.inherits(views.actionitemviews.ai.AiMain, org.apache.royale.jewel.VGroup);




/**
 * @private
 * @type {string}
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_requestData = null;


/**
 * @private
 * @type {views.actionitemviews.ai.ChatBot}
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_chatBotUi = null;


/**
 * @private
 * @type {com.model.ServiceLoader}
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_httpService = null;


/**
 * @private
 * @type {number}
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_qryCounter = 0;


/**
 * @private
 * @type {com.unhurdle.spectrum.ActionButton}
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_actionBtn = null;


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_init = function() {
  this.addEventListener(org.apache.royale.events.KeyboardEvent.KEY_DOWN, org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_onKeyDown, this, 'views_actionitemviews_ai_AiMain_onKeyDown'));
  this.qryCtr.visible = false;
};


/**
 * @private
 * @param {org.apache.royale.events.KeyboardEvent} e
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_onKeyDown = function(e) {
  if (e.key == 'Enter')
    this.getAIResponse();
};


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_initMdlType = function() {
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl2) {
    this.imgUrl.visible = true;
  } else {
    this.imgUrl.visible = false;
  }
  this.txtPrompt.focus();
  this.qryCtr.visible = true;
};


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_initMdl1 = function() {
  this.views_actionitemviews_ai_AiMain_clearBotCtr();
  this.views_actionitemviews_ai_AiMain_httpService = new com.model.ServiceLoader();
  this.views_actionitemviews_ai_AiMain_httpService.reqMethod = "POST";
  this.views_actionitemviews_ai_AiMain_httpService.contentType = "application/json";
  this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:"Please introduce yourself"});
  this.views_actionitemviews_ai_AiMain_httpService.loadJData('http://localhost:3000/api/chat', org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_dataLoadEventHandler, this, 'views_actionitemviews_ai_AiMain_dataLoadEventHandler'), com.model.ServiceLoader.DATA_TYPE_JSON, org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_errorEventHander, this, 'views_actionitemviews_ai_AiMain_errorEventHander'), false);
};


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_initMdl2 = function() {
  this.views_actionitemviews_ai_AiMain_clearBotCtr();
  this.views_actionitemviews_ai_AiMain_httpService = new com.model.ServiceLoader();
  this.views_actionitemviews_ai_AiMain_httpService.reqMethod = "POST";
  this.views_actionitemviews_ai_AiMain_httpService.contentType = "application/json";
  this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:"Describe the scene in this image.", "imageUrl":"https://www.amitshah.co.in/storage/uploads/1/1679578399-641c551f657b4.png"});
  this.views_actionitemviews_ai_AiMain_httpService.loadJData('http://localhost:3000/api/vision', org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_dataLoadEventHandler, this, 'views_actionitemviews_ai_AiMain_dataLoadEventHandler'), com.model.ServiceLoader.DATA_TYPE_JSON, org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_errorEventHander, this, 'views_actionitemviews_ai_AiMain_errorEventHander'), false);
};


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_initMdl3 = function() {
  this.views_actionitemviews_ai_AiMain_clearBotCtr();
  this.views_actionitemviews_ai_AiMain_httpService = new com.model.ServiceLoader();
  this.views_actionitemviews_ai_AiMain_httpService.reqMethod = "POST";
  this.views_actionitemviews_ai_AiMain_httpService.contentType = "application/json";
  this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:"Tell me a fun fact about space."});
  this.views_actionitemviews_ai_AiMain_httpService.loadJData('http://localhost:3000/api/Llama', org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_dataLoadEventHandler, this, 'views_actionitemviews_ai_AiMain_dataLoadEventHandler'), com.model.ServiceLoader.DATA_TYPE_JSON, org.apache.royale.utils.Language.closure(this.views_actionitemviews_ai_AiMain_errorEventHander, this, 'views_actionitemviews_ai_AiMain_errorEventHander'), false);
};


/**
 * @private
 * @param {Object} d
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_dataLoadEventHandler = function(d) {
  org.apache.royale.utils.Language.trace(d);
  if (this.views_actionitemviews_ai_AiMain_chatBotUi) {
    this.views_actionitemviews_ai_AiMain_chatBotUi.aiResponse = org.apache.royale.utils.Language.string(d.response);
  } else {
    var /** @type {org.apache.royale.html.elements.Span} */ res = new org.apache.royale.html.elements.Span();
    res.text = org.apache.royale.utils.Language.string(d.response);
    this.chatCtr.addElement(res);
  }
  this.txtPrompt.text = '';
  this.txtPrompt.disabled = false;
  this.btnQry.visible = true;
  com.util.AsJsUtil.scrollIntoView(this.views_actionitemviews_ai_AiMain_chatBotUi.id);
  this.txtPrompt.focus();
};


/**
 * @private
 * @param {org.apache.royale.events.Event} event
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_errorEventHander = function(event) {
  console.log(event.toString() + "\n\n");
};


/**
 */
views.actionitemviews.ai.AiMain.prototype.getAIResponse = function() {
  this.txtPrompt.disabled = true;
  this.btnQry.visible = false;
  this.views_actionitemviews_ai_AiMain_chatBotUi = new views.actionitemviews.ai.ChatBot();
  this.views_actionitemviews_ai_AiMain_chatBotUi.id = "chatBotUi_" + this.views_actionitemviews_ai_AiMain_qryCounter;
  this.views_actionitemviews_ai_AiMain_requestData = this.txtPrompt.text;
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl1) {
    this.views_actionitemviews_ai_AiMain_chatBotUi.aiQuery = this.views_actionitemviews_ai_AiMain_requestData;
    this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:this.views_actionitemviews_ai_AiMain_requestData});
  }
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl2) {
    this.views_actionitemviews_ai_AiMain_chatBotUi.aiQuery = this.views_actionitemviews_ai_AiMain_requestData + "<br> <img src='" + this.imgUrl.text + "' height='150'>";
    this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:this.views_actionitemviews_ai_AiMain_requestData, "imageUrl":this.imgUrl.text});
  }
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl3) {
    this.views_actionitemviews_ai_AiMain_chatBotUi.aiQuery = this.views_actionitemviews_ai_AiMain_requestData + "<br> <img src='" + this.imgUrl.text + "' height='150'>";
    this.views_actionitemviews_ai_AiMain_httpService.reqData = JSON.stringify({prompt:this.views_actionitemviews_ai_AiMain_requestData, "imageUrl":this.imgUrl.text});
  }
  this.views_actionitemviews_ai_AiMain_httpService.sendReqData();
  this.chatCtr.addElement(this.views_actionitemviews_ai_AiMain_chatBotUi);
  this.views_actionitemviews_ai_AiMain_qryCounter++;
  com.util.AsJsUtil.scrollIntoView(this.views_actionitemviews_ai_AiMain_chatBotUi.id);
};


/**
 * @private
 * @param {org.apache.royale.events.MouseEvent} e
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_actionBtnEventHandler = function(e) {
  if (this.views_actionitemviews_ai_AiMain_actionBtn)
    this.views_actionitemviews_ai_AiMain_actionBtn.selected = false;
  this.views_actionitemviews_ai_AiMain_actionBtn = org.apache.royale.utils.Language.as(e.target, com.unhurdle.spectrum.ActionButton, true);
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl1)
    this.views_actionitemviews_ai_AiMain_initMdl1();
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl2)
    this.views_actionitemviews_ai_AiMain_initMdl2();
  if (this.views_actionitemviews_ai_AiMain_actionBtn == this.mdl3)
    this.views_actionitemviews_ai_AiMain_initMdl3();
  this.views_actionitemviews_ai_AiMain_actionBtn.selected = true;
  this.views_actionitemviews_ai_AiMain_initMdlType();
};


/**
 * @private
 */
views.actionitemviews.ai.AiMain.prototype.views_actionitemviews_ai_AiMain_clearBotCtr = function() {
  while (this.chatCtr.numElements > 0) {
    this.chatCtr.removeElement(this.chatCtr.getElementAt(0));
  }
  this.views_actionitemviews_ai_AiMain_httpService = null;
  this.views_actionitemviews_ai_AiMain_chatBotUi = null;
};


/**
 * @export
 * @param {org.apache.royale.events.Event} event
 */
views.actionitemviews.ai.AiMain.prototype.$EH_13_0 = function(event)
{
  this.views_actionitemviews_ai_AiMain_init();
};


/**
 * @export
 * @param {org.apache.royale.events.MouseEvent} event
 */
views.actionitemviews.ai.AiMain.prototype.$EH_13_1 = function(event)
{
  this.views_actionitemviews_ai_AiMain_actionBtnEventHandler(event);
};


/**
 * @export
 * @param {org.apache.royale.events.MouseEvent} event
 */
views.actionitemviews.ai.AiMain.prototype.$EH_13_2 = function(event)
{
  this.views_actionitemviews_ai_AiMain_actionBtnEventHandler(event);
};


/**
 * @export
 * @param {org.apache.royale.events.MouseEvent} event
 */
views.actionitemviews.ai.AiMain.prototype.$EH_13_3 = function(event)
{
  this.views_actionitemviews_ai_AiMain_actionBtnEventHandler(event);
};


/**
 * @export
 * @param {org.apache.royale.events.MouseEvent} event
 */
views.actionitemviews.ai.AiMain.prototype.$EH_13_4 = function(event)
{
  this.getAIResponse();
};


Object.defineProperties(views.actionitemviews.ai.AiMain.prototype, /** @lends {views.actionitemviews.ai.AiMain.prototype} */ {
  actionBtnGrp: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.actionBtnGrp_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.actionBtnGrp_) {
        this.actionBtnGrp_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'actionBtnGrp', null, value));
      }
    }
  },
  mdl1: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.mdl1_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.mdl1_) {
        this.mdl1_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'mdl1', null, value));
      }
    }
  },
  mdl2: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.mdl2_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.mdl2_) {
        this.mdl2_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'mdl2', null, value));
      }
    }
  },
  mdl3: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.mdl3_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.mdl3_) {
        this.mdl3_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'mdl3', null, value));
      }
    }
  },
  chatCtr: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.chatCtr_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.chatCtr_) {
        this.chatCtr_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'chatCtr', null, value));
      }
    }
  },
  qryCtr: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.qryCtr_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.qryCtr_) {
        this.qryCtr_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'qryCtr', null, value));
      }
    }
  },
  txtPrompt: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.txtPrompt_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.txtPrompt_) {
        this.txtPrompt_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'txtPrompt', null, value));
      }
    }
  },
  imgUrl: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.imgUrl_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.imgUrl_) {
        this.imgUrl_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'imgUrl', null, value));
      }
    }
  },
  btnQry: {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      return this.btnQry_;
    },
    /** @this {views.actionitemviews.ai.AiMain} */
    set: function(value) {
      if (value != this.btnQry_) {
        this.btnQry_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'btnQry', null, value));
      }
    }
  },
  'MXMLDescriptor': {
    /** @this {views.actionitemviews.ai.AiMain} */
    get: function() {
      if (this.mxmldd == undefined)
      {
        /** @type {Array} */
        var arr = views.actionitemviews.ai.AiMain.superClass_.get__MXMLDescriptor.apply(this);
        /** @type {Array} */
        var mxmldd = [
          com.unhurdle.spectrum.ActionGroup,
          2,
          'id',
          true,
          'actionBtnGrp',
          'compact',
          true,
          true,
          0,
          0,
          [
            com.unhurdle.spectrum.ActionButton,
            2,
            'id',
            true,
            'mdl1',
            'text',
            true,
            'deephermes-3',
            0,
            1,
            'click',
            this.$EH_13_1,
            null,
            com.unhurdle.spectrum.ActionButton,
            2,
            'id',
            true,
            'mdl2',
            'text',
            true,
            'Vision AI',
            0,
            1,
            'click',
            this.$EH_13_2,
            null,
            com.unhurdle.spectrum.ActionButton,
            2,
            'id',
            true,
            'mdl3',
            'text',
            true,
            'LLAMA 3.2',
            0,
            1,
            'click',
            this.$EH_13_3,
            null
          ],
          org.apache.royale.jewel.VGroup,
          7,
          'id',
          true,
          'chatCtr',
          'className',
          true,
          'chatBoatContainer',
          'percentHeight',
          true,
          80.0,
          'percentWidth',
          true,
          80.0,
          'gap',
          true,
          5,
          'itemsHorizontalAlign',
          true,
          'itemsCenter',
          'beads',
          null,
          [
            org.apache.royale.jewel.supportClasses.scrollbar.ScrollingViewport,
            1,
            '_id',
            true,
            '$ID_13_0',
            0,
            0,
            null
          ],
          0,
          0,
          null,
          org.apache.royale.jewel.HGroup,
          3,
          'id',
          true,
          'qryCtr',
          'percentWidth',
          true,
          80.0,
          'itemsVerticalAlign',
          true,
          'itemsCenter',
          0,
          0,
          [
            com.unhurdle.spectrum.TextField,
            3,
            'id',
            true,
            'txtPrompt',
            'percentWidth',
            true,
            100.0,
            'placeholder',
            true,
            'Prompt text',
            0,
            0,
            null,
            com.unhurdle.spectrum.TextField,
            4,
            'id',
            true,
            'imgUrl',
            'percentWidth',
            true,
            100.0,
            'placeholder',
            true,
            'Full image url',
            'visible',
            true,
            false,
            0,
            0,
            null,
            org.apache.royale.jewel.ImageIcon,
            2,
            'id',
            true,
            'btnQry',
            'src',
            true,
            'img/message-sent.png',
            0,
            1,
            'click',
            this.$EH_13_4,
            null
          ]
        ];
        if (arr)
          this.mxmldd = arr.concat(mxmldd);
        else
          this.mxmldd = mxmldd;
      }
      return this.mxmldd;
    }
  }
});
/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
views.actionitemviews.ai.AiMain.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'AiMain', qName: 'views.actionitemviews.ai.AiMain', kind: 'class'  }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
views.actionitemviews.ai.AiMain.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'actionBtnGrp': { type: 'com.unhurdle.spectrum.ActionGroup', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'mdl1': { type: 'com.unhurdle.spectrum.ActionButton', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'mdl2': { type: 'com.unhurdle.spectrum.ActionButton', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'mdl3': { type: 'com.unhurdle.spectrum.ActionButton', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'chatCtr': { type: 'org.apache.royale.jewel.VGroup', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'qryCtr': { type: 'org.apache.royale.jewel.HGroup', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'txtPrompt': { type: 'com.unhurdle.spectrum.TextField', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'imgUrl': { type: 'com.unhurdle.spectrum.TextField', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'btnQry': { type: 'org.apache.royale.jewel.ImageIcon', access: 'readwrite', declaredBy: 'views.actionitemviews.ai.AiMain'}
      };
    },
    methods: function () {
      return {
        'getAIResponse': { type: 'void', declaredBy: 'views.actionitemviews.ai.AiMain'},
        'AiMain': { type: '', declaredBy: 'views.actionitemviews.ai.AiMain'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
views.actionitemviews.ai.AiMain.prototype.ROYALE_COMPILE_FLAGS = 9;



//# sourceMappingURL=./AiMain.js.map
