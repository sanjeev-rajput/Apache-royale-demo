/**
 * Generated by Apache Royale Compiler from views/actionitemviews/keybordgame/CatchGameRoyale.as
 * views.actionitemviews.keybordgame.CatchGameRoyale
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('views.actionitemviews.keybordgame.CatchGameRoyale');
/* Royale Dependency List: org.apache.royale.core.UIBase,org.apache.royale.events.Event,org.apache.royale.html.Label,org.apache.royale.jewel.Container,org.apache.royale.utils.Timer,org.apache.royale.utils.Language,XML*/

goog.require('org.apache.royale.html.Group');



/**
 * @constructor
 * @extends {org.apache.royale.html.Group}
 * @param {org.apache.royale.jewel.Container} u
 */
views.actionitemviews.keybordgame.CatchGameRoyale = function(u) {
  
  this.views_actionitemviews_keybordgame_CatchGameRoyale_balls = [];
  views.actionitemviews.keybordgame.CatchGameRoyale.base(this, 'constructor');
  this.views_actionitemviews_keybordgame_CatchGameRoyale_ui = u;
  this.width = this.views_actionitemviews_keybordgame_CatchGameRoyale_gameWidth;
  this.height = this.views_actionitemviews_keybordgame_CatchGameRoyale_gameHeight;
  this.style = "background-color: lightblue; position: relative; overflow: hidden;";
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket = new org.apache.royale.core.UIBase();
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.width = 100;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.height = 20;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.x = this.views_actionitemviews_keybordgame_CatchGameRoyale_gameWidth / 2 - this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.width / 2;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.y = this.views_actionitemviews_keybordgame_CatchGameRoyale_gameHeight - 30;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.element.style.backgroundColor = "blue";
  this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.element.style.position = "absolute";
  this.views_actionitemviews_keybordgame_CatchGameRoyale_ui.addElement(this.views_actionitemviews_keybordgame_CatchGameRoyale_basket);
  this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel = new org.apache.royale.html.Label();
  this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel.text = "Score: 0";
  this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel.x = 10;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel.y = 10;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_ui.addElement(this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel);
  document.addEventListener("keydown", org.apache.royale.utils.Language.closure(this.views_actionitemviews_keybordgame_CatchGameRoyale_onKeyDown, this, 'views_actionitemviews_keybordgame_CatchGameRoyale_onKeyDown'));
  var /** @type {org.apache.royale.utils.Timer} */ ballTimer = new org.apache.royale.utils.Timer(1000);
  ballTimer.addEventListener("timer", org.apache.royale.utils.Language.closure(this.views_actionitemviews_keybordgame_CatchGameRoyale_createBall, this, 'views_actionitemviews_keybordgame_CatchGameRoyale_createBall'));
  ballTimer.start();
  var /** @type {org.apache.royale.utils.Timer} */ loopTimer = new org.apache.royale.utils.Timer(30);
  loopTimer.addEventListener("timer", org.apache.royale.utils.Language.closure(this.views_actionitemviews_keybordgame_CatchGameRoyale_gameLoop, this, 'views_actionitemviews_keybordgame_CatchGameRoyale_gameLoop'));
  loopTimer.start();
};
goog.inherits(views.actionitemviews.keybordgame.CatchGameRoyale, org.apache.royale.html.Group);


/**
 * @private
 * @type {org.apache.royale.core.UIBase}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_basket = null;


/**
 * @private
 * @type {Array}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_balls = null;


/**
 * @private
 * @type {number}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_points = 0;


/**
 * @private
 * @type {org.apache.royale.html.Label}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel = null;


/**
 * @private
 * @type {number}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_step = 20;


/**
 * @private
 * @type {number}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_gameWidth = 600;


/**
 * @private
 * @type {number}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_gameHeight = 400;


/**
 * @private
 * @type {org.apache.royale.jewel.Container}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_ui = null;


/**
 * @private
 * @param {*} e
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_onKeyDown = function(e) {
  if (e.key == "ArrowLeft") {
    var /** @type {number} */ newXx = Math.max(0, this.views_actionitemviews_keybordgame_CatchGameRoyale_basket["posX"] - this.views_actionitemviews_keybordgame_CatchGameRoyale_step);
    this.views_actionitemviews_keybordgame_CatchGameRoyale_setPosition(this.views_actionitemviews_keybordgame_CatchGameRoyale_basket, newXx, Number(this.views_actionitemviews_keybordgame_CatchGameRoyale_basket["posY"]));
  } else if (e.key == "ArrowRight") {
    var /** @type {number} */ newX = Math.min(this.views_actionitemviews_keybordgame_CatchGameRoyale_gameWidth - this.views_actionitemviews_keybordgame_CatchGameRoyale_basket.width, this.views_actionitemviews_keybordgame_CatchGameRoyale_basket["posX"] + this.views_actionitemviews_keybordgame_CatchGameRoyale_step);
    this.views_actionitemviews_keybordgame_CatchGameRoyale_setPosition(this.views_actionitemviews_keybordgame_CatchGameRoyale_basket, newX, Number(this.views_actionitemviews_keybordgame_CatchGameRoyale_basket["posY"]));
  }
};


/**
 * @private
 * @param {org.apache.royale.events.Event} e
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_createBall = function(e) {
  var /** @type {org.apache.royale.core.UIBase} */ ball = new org.apache.royale.core.UIBase();
  ball.width = 30;
  ball.height = 30;
  var /** @type {number} */ startX = Math.random() * (this.views_actionitemviews_keybordgame_CatchGameRoyale_gameWidth - 30);
  this.views_actionitemviews_keybordgame_CatchGameRoyale_setPosition(ball, startX, -30);
  ball.element.style.backgroundColor = "red";
  ball.element.style.borderRadius = "50%";
  ball.element.style.position = "absolute";
  ball["points"] = Math.floor(Math.random() * 10) + 1;
  this.views_actionitemviews_keybordgame_CatchGameRoyale_ui.addElement(ball);
  this.views_actionitemviews_keybordgame_CatchGameRoyale_balls.push(ball);
};


/**
 * @private
 * @param {org.apache.royale.events.Event} e
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_gameLoop = function(e) {
  for (var /** @type {number} */ i = (this.views_actionitemviews_keybordgame_CatchGameRoyale_balls.length - 1) >> 0; i >= 0; i--) {
    var /** @type {org.apache.royale.core.UIBase} */ ball = /* implicit cast */ org.apache.royale.utils.Language.as(this.views_actionitemviews_keybordgame_CatchGameRoyale_balls[i], org.apache.royale.core.UIBase, true);
    var /** @type {number} */ newY = Number(ball["posY"] + 3);
    this.views_actionitemviews_keybordgame_CatchGameRoyale_setPosition(ball, Number(ball["posX"]), newY);
    if (this.views_actionitemviews_keybordgame_CatchGameRoyale_checkCollision(ball, this.views_actionitemviews_keybordgame_CatchGameRoyale_basket)) {
      this.views_actionitemviews_keybordgame_CatchGameRoyale_points += (ball["points"]) >> 0;
      this.views_actionitemviews_keybordgame_CatchGameRoyale_updateScore();
      this.views_actionitemviews_keybordgame_CatchGameRoyale_removeBall(ball, i);
    } else if (newY > this.views_actionitemviews_keybordgame_CatchGameRoyale_gameHeight) {
      this.views_actionitemviews_keybordgame_CatchGameRoyale_removeBall(ball, i);
    }
  }
};


/**
 * @private
 * @param {org.apache.royale.core.UIBase} obj
 * @param {number} x
 * @param {number} y
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_setPosition = function(obj, x, y) {
  org.apache.royale.utils.Language.trace(obj);
  obj.element.style.transform = "translate(" + x + "px," + y + "px)";
  obj["posX"] = x;
  obj["posY"] = y;
};


/**
 * @private
 * @param {org.apache.royale.core.UIBase} a
 * @param {org.apache.royale.core.UIBase} b
 * @return {boolean}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_checkCollision = function(a, b) {
  return !(a.x + a.width < b.x || a.x > b.x + b.width || a.y + a.height < b.y || a.y > b.y + b.height);
};


/**
 * @private
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_updateScore = function() {
  this.views_actionitemviews_keybordgame_CatchGameRoyale_scoreLabel.text = "Score: " + this.views_actionitemviews_keybordgame_CatchGameRoyale_points;
};


/**
 * @private
 * @param {org.apache.royale.core.UIBase} ball
 * @param {number} index
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.views_actionitemviews_keybordgame_CatchGameRoyale_removeBall = function(ball, index) {
  this.views_actionitemviews_keybordgame_CatchGameRoyale_ui.removeElement(ball);
  this.views_actionitemviews_keybordgame_CatchGameRoyale_balls.splice(index, 1);
};


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'CatchGameRoyale', qName: 'views.actionitemviews.keybordgame.CatchGameRoyale', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    methods: function () {
      return {
        'CatchGameRoyale': { type: '', declaredBy: 'views.actionitemviews.keybordgame.CatchGameRoyale', parameters: function () { return [ 'org.apache.royale.jewel.Container', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
views.actionitemviews.keybordgame.CatchGameRoyale.prototype.ROYALE_COMPILE_FLAGS = 9;
