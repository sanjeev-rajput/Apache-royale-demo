/**
 * Generated by Apache Royale Compiler from views/actionitemviews/collaboration/SocketMessageHandler.as
 * views.actionitemviews.collaboration.SocketMessageHandler
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('views.actionitemviews.collaboration.SocketMessageHandler');
/* Royale Dependency List: com.unhurdle.spectrum.TextField,com.util.AppAlert,org.apache.royale.jewel.VGroup,views.actionitemviews.collaboration.MessageItem,XML*/




/**
 * @constructor
 * @param {com.unhurdle.spectrum.TextField} input
 * @param {org.apache.royale.jewel.VGroup} output
 */
views.actionitemviews.collaboration.SocketMessageHandler = function(input, output) {
  this.views_actionitemviews_collaboration_SocketMessageHandler_inputField = input;
  this.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer = output;
};


/**
 * @private
 * @type {string}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_myUserId = null;


/**
 * @private
 * @type {org.apache.royale.jewel.VGroup}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer = null;


/**
 * @private
 * @type {com.unhurdle.spectrum.TextField}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_inputField = null;


/**
 * @param {Object} data
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.process = function(data) {
  if (data["type"] == "welcome") {
    this.views_actionitemviews_collaboration_SocketMessageHandler_myUserId = org.apache.royale.utils.Language.string(data["userId"]);
    this.views_actionitemviews_collaboration_SocketMessageHandler_handleWelcome(data);
  } else if (data["type"] == "subscribe_collabaration") {
    this.views_actionitemviews_collaboration_SocketMessageHandler_handleChatMessage(org.apache.royale.utils.Language.string(data["sender"]), org.apache.royale.utils.Language.string(data["text"]));
  } else if (data["type"] == "error") {
    this.views_actionitemviews_collaboration_SocketMessageHandler_handleError(org.apache.royale.utils.Language.string(data["message"]));
  }
};


/**
 * @private
 * @param {Object} data
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_handleWelcome = function(data) {
  this.views_actionitemviews_collaboration_SocketMessageHandler_myUserId = org.apache.royale.utils.Language.string(data["userId"]);
  this.views_actionitemviews_collaboration_SocketMessageHandler_appendMessage(this.views_actionitemviews_collaboration_SocketMessageHandler_myUserId, "Welcome to the collaboration room! You are: " + this.views_actionitemviews_collaboration_SocketMessageHandler_myUserId);
};


/**
 * @private
 * @param {string} sender
 * @param {string} message
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_handleChatMessage = function(sender, message) {
  this.views_actionitemviews_collaboration_SocketMessageHandler_appendMessage(sender, message);
};


/**
 * @private
 * @param {string} message
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_handleError = function(message) {
  this.views_actionitemviews_collaboration_SocketMessageHandler_appendMessage("System", message);
  this.views_actionitemviews_collaboration_SocketMessageHandler_inputField.disabled = true;
  com.util.AppAlert.show(com.util.AppAlert.ERROR, message);
};


/**
 * @private
 * @param {string} userId
 * @param {string} msg
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_appendMessage = function(userId, msg) {
  var /** @type {views.actionitemviews.collaboration.MessageItem} */ msgItem = new views.actionitemviews.collaboration.MessageItem();
  msgItem.myself = (userId == this.views_actionitemviews_collaboration_SocketMessageHandler_myUserId);
  msgItem.setData(userId, msg);
  this.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer.addElement(msgItem);
  this.views_actionitemviews_collaboration_SocketMessageHandler_scrollToBottom();
};


/**
 * @private
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.views_actionitemviews_collaboration_SocketMessageHandler_scrollToBottom = function() {
  if (this.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer.element)
    this.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer.element.scrollTop = this.views_actionitemviews_collaboration_SocketMessageHandler_outputContainer.element.scrollHeight;
};


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'SocketMessageHandler', qName: 'views.actionitemviews.collaboration.SocketMessageHandler', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    methods: function () {
      return {
        'SocketMessageHandler': { type: '', declaredBy: 'views.actionitemviews.collaboration.SocketMessageHandler', parameters: function () { return [ 'com.unhurdle.spectrum.TextField', false ,'org.apache.royale.jewel.VGroup', false ]; }},
        'process': { type: 'void', declaredBy: 'views.actionitemviews.collaboration.SocketMessageHandler', parameters: function () { return [ 'Object', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
views.actionitemviews.collaboration.SocketMessageHandler.prototype.ROYALE_COMPILE_FLAGS = 9;

//# sourceMappingURL=./SocketMessageHandler.js.map
