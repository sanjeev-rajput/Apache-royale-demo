/**
 * Generated by Apache Royale Compiler from views/actionitemviews/searchlist/SearchListMain.mxml
 * views.actionitemviews.searchlist.SearchListMain
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('views.actionitemviews.searchlist.SearchListMain');
/* Royale Dependency List: org.apache.royale.jewel.VGroup,org.apache.royale.jewel.HGroup,org.apache.royale.jewel.Label,org.apache.royale.jewel.Spacer,org.apache.royale.jewel.ImageIcon,org.apache.royale.jewel.Image,com.unhurdle.spectrum.Picker,org.apache.royale.html.supportClasses.ScrollingViewport,com.controller.PopupManager,com.model.ServiceLoader,com.util.AsJsUtil,org.apache.royale.events.Event,org.apache.royale.events.MouseEvent,views.actionitemviews.searchlist.LstItem,views.actionitemviews.searchlist.LstModel,XML*/

goog.require('org.apache.royale.jewel.View');



/**
 * @constructor
 * @extends {org.apache.royale.jewel.View}
 */
views.actionitemviews.searchlist.SearchListMain = function() {
  views.actionitemviews.searchlist.SearchListMain.base(this, 'constructor');
  
  this.views_actionitemviews_searchlist_SearchListMain_listData = new Array();
  /**
   * @private
   * @type {org.apache.royale.jewel.VGroup}
   */
  this.$ID_11_4;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.HGroup}
   */
  this.$ID_11_2;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.Label}
   */
  this.$ID_11_0;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.Spacer}
   */
  this.$ID_11_1;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.ImageIcon}
   */
  this.popupCloseBtn_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.Image}
   */
  this.lImg_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.Picker}
   */
  this.cLst_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.VGroup}
   */
  this.ctr_;
  
  /**
   * @private
   * @type {org.apache.royale.html.supportClasses.ScrollingViewport}
   */
  this.$ID_11_3;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldd;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldp;

  this.generateMXMLAttributes([
    2,
    'percentWidth',
    true,
    100.0,
    'percentHeight',
    true,
    100.0,
    0,
    1,
    'initComplete',
    this.$EH_11_0
  ]);
  
};
goog.inherits(views.actionitemviews.searchlist.SearchListMain, org.apache.royale.jewel.View);




/**
 * @private
 * @type {Array}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_listData = null;


/**
 * @private
 * @type {views.actionitemviews.searchlist.LstItem}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain__lastSearchItem = null;


/**
 * @private
 * @type {boolean}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain__showPopupCloseBtn = true;


/**
 * @private
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_init = function() {
  this.cLst.dataProvider = this.views_actionitemviews_searchlist_SearchListMain_listData;
  this.cLst.popover.setStyle('z-index', 1997);
  this.views_actionitemviews_searchlist_SearchListMain_fetchData();
};


/**
 * @private
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_fetchData = function() {
  this.popupCloseBtn.visible = this.views_actionitemviews_searchlist_SearchListMain__showPopupCloseBtn;
  if (views.actionitemviews.searchlist.LstModel.instance.listData != null) {
    this.cLst.dataProvider = views.actionitemviews.searchlist.LstModel.instance.getCountryDetailsByKey('name');
    this.views_actionitemviews_searchlist_SearchListMain_populateListUiItems();
    return;
  }
  var /** @type {com.model.ServiceLoader} */ svr = new com.model.ServiceLoader();
  svr.loadJData("https://restcountries.com/v3.1/independent?status=true", org.apache.royale.utils.Language.closure(this.views_actionitemviews_searchlist_SearchListMain_dataLoadHandler, this, 'views_actionitemviews_searchlist_SearchListMain_dataLoadHandler'), com.model.ServiceLoader.DATA_TYPE_JSON, org.apache.royale.utils.Language.closure(this.views_actionitemviews_searchlist_SearchListMain_failHandler, this, 'views_actionitemviews_searchlist_SearchListMain_failHandler'), false);
};


/**
 * @private
 * @param {JSON} obj
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_dataLoadHandler = function(obj) {
  if (obj == null) {
    throw new Error("Data not found");
  }
  if (views.actionitemviews.searchlist.LstModel.instance.listData == null) {
    views.actionitemviews.searchlist.LstModel.instance.listData = obj;
    this.cLst.dataProvider = views.actionitemviews.searchlist.LstModel.instance.getCountryDetailsByKey('name');
  }
  this.views_actionitemviews_searchlist_SearchListMain_populateListUiItems();
};


/**
 * @private
 * @param {Object} error
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_failHandler = function(error) {
  org.apache.royale.utils.Language.trace("Failed to load data" + error);
};


/**
 * @private
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_populateListUiItems = function() {
  this.lImg.visible = false;
  this.cLst.visible = true;
  var /** @type {Array} */ cDetail = views.actionitemviews.searchlist.LstModel.instance.allCountryDetails;
  for (var /** @type {number} */ i = 0; i < cDetail.length; i++) {
    var /** @type {views.actionitemviews.searchlist.LstItem} */ item = new views.actionitemviews.searchlist.LstItem();
    item.details = cDetail[i];
    item.id = "sLstItem" + i;
    this.ctr.addElement(item);
  }
};


/**
 * @private
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_listChangeEventHandler = function() {
  var /** @type {number} */ idx = this.cLst.selectedIndex;
  if (this.views_actionitemviews_searchlist_SearchListMain__lastSearchItem)
    this.views_actionitemviews_searchlist_SearchListMain__lastSearchItem.removeClass('highlightSearchListItem');
  if (idx != -1) {
    var /** @type {Array} */ cDetail = views.actionitemviews.searchlist.LstModel.instance.allCountryDetails;
    var /** @type {views.actionitemviews.searchlist.LstItem} */ item = this.ctr.getElementAt(idx);
    com.util.AsJsUtil.scrollIntoView(item.id);
    item.addClass("highlightSearchListItem");
    this.views_actionitemviews_searchlist_SearchListMain__lastSearchItem = item;
  }
};


/**
 * @private
 */
views.actionitemviews.searchlist.SearchListMain.prototype.views_actionitemviews_searchlist_SearchListMain_popupCloseHandler = function() {
  com.controller.PopupManager.getInstance().reomovePopup();
};


;





/**
 * @nocollapse
 * @export
 * @type {boolean}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.showCloseBtn;


views.actionitemviews.searchlist.SearchListMain.prototype.set__showCloseBtn = function(value) {
  this.views_actionitemviews_searchlist_SearchListMain__showPopupCloseBtn = value;
};


Object.defineProperties(views.actionitemviews.searchlist.SearchListMain.prototype, /** @lends {views.actionitemviews.searchlist.SearchListMain.prototype} */ {
/**
 * @type {boolean}
 */
showCloseBtn: {
set: views.actionitemviews.searchlist.SearchListMain.prototype.set__showCloseBtn}}
);/**
 * @export
 * @param {org.apache.royale.events.Event} event
 */
views.actionitemviews.searchlist.SearchListMain.prototype.$EH_11_0 = function(event)
{
  this.views_actionitemviews_searchlist_SearchListMain_init();
};


/**
 * @export
 * @param {org.apache.royale.events.MouseEvent} event
 */
views.actionitemviews.searchlist.SearchListMain.prototype.$EH_11_1 = function(event)
{
  this.views_actionitemviews_searchlist_SearchListMain_popupCloseHandler();
};


/**
 * @export
 * @param {org.apache.royale.events.Event} event
 */
views.actionitemviews.searchlist.SearchListMain.prototype.$EH_11_2 = function(event)
{
  this.views_actionitemviews_searchlist_SearchListMain_listChangeEventHandler();
};


Object.defineProperties(views.actionitemviews.searchlist.SearchListMain.prototype, /** @lends {views.actionitemviews.searchlist.SearchListMain.prototype} */ {
  popupCloseBtn: {
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    get: function() {
      return this.popupCloseBtn_;
    },
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    set: function(value) {
      if (value != this.popupCloseBtn_) {
        this.popupCloseBtn_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'popupCloseBtn', null, value));
      }
    }
  },
  lImg: {
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    get: function() {
      return this.lImg_;
    },
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    set: function(value) {
      if (value != this.lImg_) {
        this.lImg_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'lImg', null, value));
      }
    }
  },
  cLst: {
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    get: function() {
      return this.cLst_;
    },
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    set: function(value) {
      if (value != this.cLst_) {
        this.cLst_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'cLst', null, value));
      }
    }
  },
  ctr: {
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    get: function() {
      return this.ctr_;
    },
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    set: function(value) {
      if (value != this.ctr_) {
        this.ctr_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'ctr', null, value));
      }
    }
  },
  'MXMLDescriptor': {
    /** @this {views.actionitemviews.searchlist.SearchListMain} */
    get: function() {
      if (this.mxmldd == undefined)
      {
        /** @type {Array} */
        var arr = views.actionitemviews.searchlist.SearchListMain.superClass_.get__MXMLDescriptor.apply(this);
        /** @type {Array} */
        var mxmldd = [
          org.apache.royale.jewel.VGroup,
          5,
          '_id',
          true,
          '$ID_11_4',
          'percentWidth',
          true,
          100.0,
          'percentHeight',
          true,
          100.0,
          'itemsHorizontalAlign',
          true,
          'itemsCenter',
          'className',
          true,
          'imgPopup',
          0,
          0,
          [
            org.apache.royale.jewel.HGroup,
            4,
            '_id',
            true,
            '$ID_11_2',
            'percentWidth',
            true,
            100,
            'itemsVerticalAlign',
            true,
            'itemsTop',
            'className',
            true,
            'imgPopupTitle',
            0,
            0,
            [
              org.apache.royale.jewel.Label,
              2,
              '_id',
              true,
              '$ID_11_0',
              'text',
              true,
              'Search and List Data',
              0,
              0,
              null,
              org.apache.royale.jewel.Spacer,
              2,
              '_id',
              true,
              '$ID_11_1',
              'percentWidth',
              true,
              100.0,
              0,
              0,
              null,
              org.apache.royale.jewel.ImageIcon,
              4,
              'id',
              true,
              'popupCloseBtn',
              'src',
              true,
              'img/close.png',
              'width',
              true,
              30,
              'className',
              true,
              'imgPopupXicon',
              0,
              1,
              'click',
              this.$EH_11_1,
              null
            ],
            org.apache.royale.jewel.Image,
            2,
            'id',
            true,
            'lImg',
            'src',
            true,
            'img/loadingAnim.gif',
            0,
            0,
            null,
            com.unhurdle.spectrum.Picker,
            5,
            'id',
            true,
            'cLst',
            'visible',
            true,
            false,
            'searchable',
            true,
            true,
            'className',
            true,
            'slist',
            'percentWidth',
            true,
            100.0,
            0,
            1,
            'change',
            this.$EH_11_2,
            null,
            org.apache.royale.jewel.VGroup,
            4,
            'id',
            true,
            'ctr',
            'percentWidth',
            true,
            100.0,
            'percentHeight',
            true,
            100.0,
            'beads',
            null,
            [
              org.apache.royale.html.supportClasses.ScrollingViewport,
              1,
              '_id',
              true,
              '$ID_11_3',
              0,
              0,
              null
            ],
            0,
            0,
            null
          ]
        ];
        if (arr)
          this.mxmldd = arr.concat(mxmldd);
        else
          this.mxmldd = mxmldd;
      }
      return this.mxmldd;
    }
  }
});
/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'SearchListMain', qName: 'views.actionitemviews.searchlist.SearchListMain', kind: 'class'  }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'showCloseBtn': { type: 'Boolean', access: 'writeonly', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'},
        'popupCloseBtn': { type: 'org.apache.royale.jewel.ImageIcon', access: 'readwrite', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'},
        'lImg': { type: 'org.apache.royale.jewel.Image', access: 'readwrite', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'},
        'cLst': { type: 'com.unhurdle.spectrum.Picker', access: 'readwrite', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'},
        'ctr': { type: 'org.apache.royale.jewel.VGroup', access: 'readwrite', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'}
      };
    },
    methods: function () {
      return {
        'SearchListMain': { type: '', declaredBy: 'views.actionitemviews.searchlist.SearchListMain'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
views.actionitemviews.searchlist.SearchListMain.prototype.ROYALE_COMPILE_FLAGS = 9;
