/**
 * Generated by Apache Royale Compiler from views/ProductIndexing.mxml
 * views.ProductIndexing
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('views.ProductIndexing');
/* Royale Dependency List: org.apache.royale.jewel.VGroup,org.apache.royale.jewel.HGroup,com.unhurdle.spectrum.Dropdown,com.unhurdle.spectrum.Label,org.apache.royale.jewel.FooterBar,com.event.DsEvent,com.model.ServiceLoader,com.unhurdle.spectrum.Accordion,com.unhurdle.spectrum.AccordionContent,com.unhurdle.spectrum.AccordionSection,com.unhurdle.spectrum.Toast,com.util.DsUtil,org.apache.royale.events.Event,org.apache.royale.events.MouseEvent,org.apache.royale.html.supportClasses.ScrollingViewport,views.ContentLoaderIframe*/

goog.require('org.apache.royale.jewel.ResponsiveView');



/**
 * @constructor
 * @extends {org.apache.royale.jewel.ResponsiveView}
 */
views.ProductIndexing = function() {
  views.ProductIndexing.base(this, 'constructor');
  
  /**
   * @private
   * @type {org.apache.royale.jewel.VGroup}
   */
  this.vg_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.HGroup}
   */
  this.$ID_12_0;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.Dropdown}
   */
  this.CbProduct_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.Label}
   */
  this.titleTxt_;
  
  /**
   * @private
   * @type {org.apache.royale.jewel.FooterBar}
   */
  this.footerUi_;
  
  /**
   * @private
   * @type {com.unhurdle.spectrum.Label}
   */
  this.$ID_12_1;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldd;
  
  /**
   * @private
   * @type {Array}
   */
  this.mxmldp;

  this.generateMXMLAttributes([
    0,
    0,
    1,
    'initComplete',
    this.$EH_12_0
  ]);
  
};
goog.inherits(views.ProductIndexing, org.apache.royale.jewel.ResponsiveView);




/**
 * @private
 * @type {Object}
 */
views.ProductIndexing.CbData = null;


/**
 * @private
 * @type {com.unhurdle.spectrum.Accordion}
 */
views.ProductIndexing.prototype.views_ProductIndexing_accUi = null;


/**
 * @private
 */
views.ProductIndexing.prototype.views_ProductIndexing_initComplete = function() {
  var /** @type {com.unhurdle.spectrum.Toast} */ t = new com.unhurdle.spectrum.Toast();
  t.flavor = com.unhurdle.spectrum.Toast.SUCCESS;
  t.text = "Data Loaded";
  t.autoClose = 2000;
  t.show();
  this.views_ProductIndexing_initTreeUi();
  com.event.DsEvent.instance.addEventListener(com.event.DsEvent.IFRAMECLOSED, org.apache.royale.utils.Language.closure(this.views_ProductIndexing_ifameEventHandler, this, 'views_ProductIndexing_ifameEventHandler'));
};


/**
 * @private
 * @param {Object} obj
 */
views.ProductIndexing.prototype.views_ProductIndexing_ifameEventHandler = function(obj) {
  this.footerUi.visible = true;
};


/**
 * @private
 */
views.ProductIndexing.prototype.views_ProductIndexing_initTreeUi = function() {
  var /** @type {com.model.ServiceLoader} */ sldr = new com.model.ServiceLoader();
  sldr.loadJData("config/product.json", org.apache.royale.utils.Language.closure(this.views_ProductIndexing_loadHandler, this, 'views_ProductIndexing_loadHandler'));
};


/**
 * @private
 * @param {string} url
 */
views.ProductIndexing.prototype.views_ProductIndexing_loadAndUpdateAccData = function(url) {
  var self = this;
  function loadHandler(e) {
    self.views_ProductIndexing_renderAccUi(com.util.DsUtil.csvFileToJsonObj(e));
  };
  var /** @type {com.model.ServiceLoader} */ sldr = new com.model.ServiceLoader();
  sldr.loadJData("config/" + url, loadHandler, com.model.ServiceLoader.T_EXT);
};


/**
 * @private
 * @param {Array} data
 */
views.ProductIndexing.prototype.views_ProductIndexing_renderAccUi = function(data) {
  if (this.views_ProductIndexing_accUi != null)
    this.vg.removeElement(this.views_ProductIndexing_accUi);
  this.views_ProductIndexing_accUi = new com.unhurdle.spectrum.Accordion();
  this.views_ProductIndexing_accUi.percentWidth = 100;
  this.views_ProductIndexing_accUi.height = window.innerHeight - 100;
  var /** @type {org.apache.royale.html.supportClasses.ScrollingViewport} */ bd = new org.apache.royale.html.supportClasses.ScrollingViewport();
  this.views_ProductIndexing_accUi.addBead(bd);
  var /** @type {string} */ subjName = "";
  var /** @type {com.unhurdle.spectrum.AccordionSection} */ header = null;
  for (var /** @type {number} */ i = 0; i < data.length - 1; i++) {
    var /** @type {string} */ sName = org.apache.royale.utils.Language.string(data[i]["Grade"]);
    if (sName != subjName) {
      if (header)
        this.views_ProductIndexing_accUi.addElement(header);
      header = new com.unhurdle.spectrum.AccordionSection();
      header.headerText.bold();
      header.headerText = sName;
      subjName = sName;
    }
    var /** @type {com.unhurdle.spectrum.AccordionContent} */ content = new com.unhurdle.spectrum.AccordionContent();
    content.text = i + 1 + ".  |  " + data[i]["Topic"] + " :: " + data[i]["Subtopic"] + " :: " + data[i]["Activity Type"] + " :: " + data[i]["Activity Name"];
    var /** @type {Object} */ objModel = new Object();
    objModel.url = data[i]["Location"];
    content.model = objModel;
    if (sName == "POC") {
      content.className = "tocText";
      content.addEventListener(org.apache.royale.events.MouseEvent.CLICK, org.apache.royale.utils.Language.closure(this.views_ProductIndexing_tocItemClickHanler, this, 'views_ProductIndexing_tocItemClickHanler'));
    }
    header.addElement(content);
  }
  this.views_ProductIndexing_accUi.addElement(header);
  this.vg.addElement(this.views_ProductIndexing_accUi);
};


/**
 * @private
 * @param {org.apache.royale.events.MouseEvent} e
 */
views.ProductIndexing.prototype.views_ProductIndexing_tocItemClickHanler = function(e) {
  var /** @type {com.unhurdle.spectrum.AccordionContent} */ accContent = e.target;
  this.titleTxt.text = accContent.text;
  views.ContentLoaderIframe.instance.loadPage(accContent.model);
  this.footerUi.visible = false;
  e.preventDefault();
};


/**
 * @private
 * @param {JSON} e
 */
views.ProductIndexing.prototype.views_ProductIndexing_loadHandler = function(e) {
  views.ProductIndexing.CbData = e['Product'];
  var /** @type {Array} */ menuItem = new Array();
  var foreachiter0_target = views.ProductIndexing.CbData;
  for (var foreachiter0 in foreachiter0_target) 
  {
  var i = foreachiter0_target[foreachiter0];
  {
    menuItem.push(i.label);
  }}
  
  this.CbProduct.dataProvider = menuItem;
  this.CbProduct.selectedIndex = -1;
};


/**
 * @private
 */
views.ProductIndexing.prototype.views_ProductIndexing_CbChandEventHandler = function() {
  if (this.CbProduct.selectedItem == null)
    return;
  var /** @type {number} */ idx = this.CbProduct.selectedIndex;
  console.log(views.ProductIndexing.CbData[idx]);
  this.views_ProductIndexing_loadAndUpdateAccData(org.apache.royale.utils.Language.string(views.ProductIndexing.CbData[idx]['indexing']));
};


/**
 * @export
 * @param {org.apache.royale.events.Event} event
 */
views.ProductIndexing.prototype.$EH_12_0 = function(event)
{
  this.views_ProductIndexing_initComplete();
};


/**
 * @export
 * @param {org.apache.royale.events.Event} event
 */
views.ProductIndexing.prototype.$EH_12_1 = function(event)
{
  this.views_ProductIndexing_CbChandEventHandler();
};


Object.defineProperties(views.ProductIndexing.prototype, /** @lends {views.ProductIndexing.prototype} */ {
  vg: {
    /** @this {views.ProductIndexing} */
    get: function() {
      return this.vg_;
    },
    /** @this {views.ProductIndexing} */
    set: function(value) {
      if (value != this.vg_) {
        this.vg_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'vg', null, value));
      }
    }
  },
  CbProduct: {
    /** @this {views.ProductIndexing} */
    get: function() {
      return this.CbProduct_;
    },
    /** @this {views.ProductIndexing} */
    set: function(value) {
      if (value != this.CbProduct_) {
        this.CbProduct_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'CbProduct', null, value));
      }
    }
  },
  titleTxt: {
    /** @this {views.ProductIndexing} */
    get: function() {
      return this.titleTxt_;
    },
    /** @this {views.ProductIndexing} */
    set: function(value) {
      if (value != this.titleTxt_) {
        this.titleTxt_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'titleTxt', null, value));
      }
    }
  },
  footerUi: {
    /** @this {views.ProductIndexing} */
    get: function() {
      return this.footerUi_;
    },
    /** @this {views.ProductIndexing} */
    set: function(value) {
      if (value != this.footerUi_) {
        this.footerUi_ = value;
        this.dispatchEvent(org.apache.royale.events.ValueChangeEvent.createUpdateEvent(this, 'footerUi', null, value));
      }
    }
  },
  'MXMLDescriptor': {
    /** @this {views.ProductIndexing} */
    get: function() {
      if (this.mxmldd == undefined)
      {
        /** @type {Array} */
        var arr = views.ProductIndexing.superClass_.get__MXMLDescriptor.apply(this);
        /** @type {Array} */
        var mxmldd = [
          org.apache.royale.jewel.VGroup,
          2,
          '_id',
          true,
          'vg',
          'percentWidth',
          true,
          100,
          0,
          0,
          [
            org.apache.royale.jewel.HGroup,
            6,
            '_id',
            true,
            '$ID_12_0',
            'percentWidth',
            true,
            100,
            'gap',
            true,
            10,
            'className',
            true,
            'actionHgroup',
            'itemsVerticalAlign',
            true,
            'itemsCenter',
            'itemsHorizontalAlign',
            true,
            'itemsCenter',
            0,
            0,
            [
              com.unhurdle.spectrum.Dropdown,
              4,
              'id',
              true,
              'CbProduct',
              'selectedIndex',
              true,
              0,
              'quiet',
              true,
              true,
              'percentWidth',
              true,
              20,
              0,
              1,
              'change',
              this.$EH_12_1,
              null,
              com.unhurdle.spectrum.Label,
              4,
              'id',
              true,
              'titleTxt',
              'text',
              true,
              'Select a subject from combobox',
              'percentWidth',
              true,
              70,
              'className',
              true,
              'selectedTocItem',
              0,
              0,
              null
            ],
            org.apache.royale.jewel.FooterBar,
            3,
            '_id',
            true,
            'footerUi',
            'percentWidth',
            true,
            100,
            'x',
            true,
            0,
            0,
            0,
            [
              com.unhurdle.spectrum.Label,
              5,
              '_id',
              true,
              '$ID_12_1',
              'x',
              true,
              0,
              'percentWidth',
              true,
              100,
              'text',
              true,
              'Copyright © 2022 - 2024 TECH FOR EDUCATION PVT. LTD.®. All rights reserved. ',
              'className',
              true,
              'footerBarText',
              0,
              0,
              null
            ]
          ]
        ];
        if (arr)
          this.mxmldd = arr.concat(mxmldd);
        else
          this.mxmldd = mxmldd;
      }
      return this.mxmldd;
    }
  }
});
/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
views.ProductIndexing.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'ProductIndexing', qName: 'views.ProductIndexing', kind: 'class'  }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
views.ProductIndexing.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'vg': { type: 'org.apache.royale.jewel.VGroup', access: 'readwrite', declaredBy: 'views.ProductIndexing'},
        'CbProduct': { type: 'com.unhurdle.spectrum.Dropdown', access: 'readwrite', declaredBy: 'views.ProductIndexing'},
        'titleTxt': { type: 'com.unhurdle.spectrum.Label', access: 'readwrite', declaredBy: 'views.ProductIndexing'},
        'footerUi': { type: 'org.apache.royale.jewel.FooterBar', access: 'readwrite', declaredBy: 'views.ProductIndexing'}
      };
    },
    methods: function () {
      return {
        'ProductIndexing': { type: '', declaredBy: 'views.ProductIndexing'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
views.ProductIndexing.prototype.ROYALE_COMPILE_FLAGS = 9;
/**
 * Provide reflection support for distinguishing dynamic fields on class object (static)
 * @const
 * @type {Array<string>}
 */
views.ProductIndexing.prototype.ROYALE_INITIAL_STATICS = Object.keys(views.ProductIndexing);
