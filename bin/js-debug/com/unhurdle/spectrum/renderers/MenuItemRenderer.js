/**
 * Generated by Apache Royale Compiler from com/unhurdle/spectrum/renderers/MenuItemRenderer.as
 * com.unhurdle.spectrum.renderers.MenuItemRenderer
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('com.unhurdle.spectrum.renderers.MenuItemRenderer');
/* Royale Dependency List: com.unhurdle.spectrum.Icon,com.unhurdle.spectrum.ImageIcon,com.unhurdle.spectrum.Menu,com.unhurdle.spectrum.TextNode,com.unhurdle.spectrum.const.IconPrefix,com.unhurdle.spectrum.const.IconType,com.unhurdle.spectrum.data.MenuItem,org.apache.royale.core.WrappedHTMLElement,org.apache.royale.events.Event,org.apache.royale.html.util.getLabelFromData,org.apache.royale.utils.Language*/

goog.require('com.unhurdle.spectrum.renderers.DataItemRenderer');



/**
 * @constructor
 * @extends {com.unhurdle.spectrum.renderers.DataItemRenderer}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer = function() {
  com.unhurdle.spectrum.renderers.MenuItemRenderer.base(this, 'constructor');
  this.typeNames = "";
};
goog.inherits(com.unhurdle.spectrum.renderers.MenuItemRenderer, com.unhurdle.spectrum.renderers.DataItemRenderer);


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.getSelector = function() {
  return "spectrum-Menu";
};


/**
 * @private
 * @type {com.unhurdle.spectrum.Menu}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu = null;


/**
 * @private
 * @param {Element} e
 * @return {boolean}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_elementHasSubMenu = function(e) {
  return false;
};


/**
 * @private
 * @param {org.apache.royale.events.Event} event
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_openSubMenu = function(event) {
  if (org.apache.royale.utils.Language.is(this.data, com.unhurdle.spectrum.data.MenuItem)) {
    var /** @type {com.unhurdle.spectrum.data.MenuItem} */ menuItem = this.data;
    if (menuItem.subMenu) {
      menuItem.isOpen = !menuItem.isOpen;
      this.toggle("is-open", menuItem.isOpen);
      if (menuItem.isOpen) {
        if (!this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu) {
          this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu = new com.unhurdle.spectrum.Menu();
          this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu.dataProvider = menuItem.subMenu;
          this.addElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu);
        }
      } else {
        this.removeElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu);
        this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu = null;
      }
    }
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_createIcon();
  }
};


/**
 * @private
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_createIcon = function() {
  var /** @type {com.unhurdle.spectrum.data.MenuItem} */ menuItem = this.data;
  if (menuItem.subMenu) {
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type = this.data.isOpen ? com.unhurdle.spectrum.const.IconType.CHEVRON_DOWN_MEDIUM : com.unhurdle.spectrum.const.IconType.CHEVRON_RIGHT_MEDIUM;
    if (this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator) {
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.selector = com.unhurdle.spectrum.Icon.getCSSTypeSelector(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type);
    } else {
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator = new com.unhurdle.spectrum.Icon(com.unhurdle.spectrum.Icon.getCSSTypeSelector(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type));
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.toggle(this.appendSelector("-chevron"), true);
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.toggle(this.appendSelector("-itemIcon"), true);
      this.addElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator);
    }
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.type = this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type;
  }
  if (this.com_unhurdle_spectrum_renderers_MenuItemRenderer_elementHasSubMenu(this.element)) {
    if (this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator) {
      this.removeElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator);
    }
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator = new com.unhurdle.spectrum.Icon(com.unhurdle.spectrum.Icon.getCSSTypeSelector(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type));
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.toggle(this.appendSelector("-itemIndicator"), true);
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.type = this.com_unhurdle_spectrum_renderers_MenuItemRenderer_type;
    this.element.insertBefore(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator.element, this.element.firstElementChild);
  }
};


/**
 * @protected
 * @type {com.unhurdle.spectrum.Icon}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.icon = null;


/**
 * @protected
 * @type {com.unhurdle.spectrum.ImageIcon}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.imageIcon = null;


/**
 * @protected
 * @type {com.unhurdle.spectrum.TextNode}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.textNode = null;


/**
 * @private
 * @type {com.unhurdle.spectrum.Icon}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_indicator = null;


/**
 * @private
 * @type {string}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_type = null;


/**
 * @private
 * @type {com.unhurdle.spectrum.Icon}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon = null;


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.getTag = function() {
  return "li";
};


/**
 * @protected
 * @override
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.createElement = function() {
  var /** @type {org.apache.royale.core.WrappedHTMLElement} */ elem = com.unhurdle.spectrum.renderers.MenuItemRenderer.superClass_.createElement.apply(this);
  this.textNode = new com.unhurdle.spectrum.TextNode("span");
  this.textNode.className = this.appendSelector("-itemLabel");
  this.textNode.element.style.userSelect = "none";
  elem.appendChild(this.textNode.element);
  return elem;
};


com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.set__data = function(value) {
  var /** @type {com.unhurdle.spectrum.data.MenuItem} */ menuItem = null;
  com.unhurdle.spectrum.renderers.MenuItemRenderer.superClass_.set__data.apply(this, [value]);
  //var /** @type {com.unhurdle.spectrum.data.MenuItem} */ menuItem = null;
  menuItem = value;
  this.toggle(this.appendSelector("-sectionHeading"), menuItem.isHeading);
  var /** @type {boolean} */ isItem = !menuItem.isHeading && !menuItem.isDivider;
  this.toggle(this.appendSelector("-item"), isItem);
  this.toggle(this.appendSelector("-divider"), menuItem.isDivider);
  if (menuItem.isDivider) {
  } else {
    this.textNode.text = org.apache.royale.html.util.getLabelFromData(this, value);
  }
  if (menuItem.subMenu && menuItem.isOpen) {
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu = new com.unhurdle.spectrum.Menu();
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu.dataProvider = menuItem.subMenu;
    this.addElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_submenu);
  }
  this.toggle("is-open", menuItem.isOpen);
  this.addEventListener("click", org.apache.royale.utils.Language.closure(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_openSubMenu, this, 'com_unhurdle_spectrum_renderers_MenuItemRenderer_openSubMenu'));
  this.disabled = menuItem.disabled;
  if (menuItem.icon) {
    if (!this.icon) {
      this.icon = new com.unhurdle.spectrum.Icon(menuItem.icon);
      this.element.insertBefore(this.icon.element, this.element.childNodes[0] || null);
      this.icon.addedToParent();
    } else {
      this.icon.setStyle("display", null);
      this.icon.selector = menuItem.icon;
    }
  } else if (this.icon) {
    this.icon.setStyle("display", "none");
  }
  if (menuItem.imageIcon) {
    if (!this.imageIcon) {
      this.imageIcon = new com.unhurdle.spectrum.ImageIcon(menuItem.imageIcon);
      this.element.insertBefore(this.imageIcon.element, this.element.childNodes[0] || null);
      this.imageIcon.addedToParent();
    } else {
      this.imageIcon.setStyle("display", null);
      this.imageIcon.src = menuItem.imageIcon;
    }
  } else if (this.imageIcon) {
    this.imageIcon.setStyle("display", "none");
  }
  this.com_unhurdle_spectrum_renderers_MenuItemRenderer_createIcon();
};


com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.set__selected = function(value) {
  com.unhurdle.spectrum.renderers.MenuItemRenderer.superClass_.set__selected.apply(this, [value]);
  if (value) {
    if (!this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon) {
      var /** @type {string} */ type = com.unhurdle.spectrum.const.IconType.CHECKMARK_MEDIUM;
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon = new com.unhurdle.spectrum.Icon(com.unhurdle.spectrum.const.IconPrefix.SPECTRUM_CSS_ICON + type);
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon.type = type;
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon.className = this.appendSelector("-checkmark");
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon.setStyle("display", "none");
      this.addElement(this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon);
    }
    this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon.setStyle("display", null);
  } else {
    if (this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon) {
      this.com_unhurdle_spectrum_renderers_MenuItemRenderer_checkIcon.setStyle("display", "none");
    }
  }
};


Object.defineProperties(com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype, /** @lends {com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype} */ {
/**
 * @type {Object}
 */
data: {
get: org.apache.royale.html.supportClasses.UIItemRendererBase.prototype.get__data,
set: com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.set__data},
/**
 * @type {boolean}
 */
selected: {
get: com.unhurdle.spectrum.renderers.DataItemRenderer.prototype.get__selected,
set: com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.set__selected}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'MenuItemRenderer', qName: 'com.unhurdle.spectrum.renderers.MenuItemRenderer', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'data': { type: 'Object', access: 'writeonly', declaredBy: 'com.unhurdle.spectrum.renderers.MenuItemRenderer'},
        'selected': { type: 'Boolean', access: 'writeonly', declaredBy: 'com.unhurdle.spectrum.renderers.MenuItemRenderer'}
      };
    },
    methods: function () {
      return {
        'MenuItemRenderer': { type: '', declaredBy: 'com.unhurdle.spectrum.renderers.MenuItemRenderer'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
com.unhurdle.spectrum.renderers.MenuItemRenderer.prototype.ROYALE_COMPILE_FLAGS = 11;
