/**
 * Generated by Apache Royale Compiler from com/unhurdle/spectrum/TooltipBead.as
 * com.unhurdle.spectrum.TooltipBead
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('com.unhurdle.spectrum.TooltipBead');
/* Royale Dependency List: com.unhurdle.spectrum.Tooltip,org.apache.royale.core.IPopUpHost,org.apache.royale.core.IStrand,org.apache.royale.core.IUIBase,org.apache.royale.events.IEventDispatcher,org.apache.royale.events.MouseEvent,org.apache.royale.geom.Point,org.apache.royale.utils.PointUtils,org.apache.royale.utils.UIUtils,org.apache.royale.utils.Language*/

goog.require('org.apache.royale.core.IBead');



/**
 * @constructor
 * @implements {org.apache.royale.core.IBead}
 */
com.unhurdle.spectrum.TooltipBead = function() {

this.com_unhurdle_spectrum_TooltipBead__direction = com.unhurdle.spectrum.TooltipBead.TOP;
};


/**
 * @nocollapse
 * @const
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.LEFT = "left";


/**
 * @nocollapse
 * @const
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.RIGHT = "right";


/**
 * @nocollapse
 * @const
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.BOTTOM = "bottom";


/**
 * @nocollapse
 * @const
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.TOP = "top";


/**
 * @private
 * @type {com.unhurdle.spectrum.TooltipBead}
 */
com.unhurdle.spectrum.TooltipBead.activeBead = null;


/**
 * @nocollapse
 */
com.unhurdle.spectrum.TooltipBead.closeTips = function() {
  if (com.unhurdle.spectrum.TooltipBead.activeBead) {
    com.unhurdle.spectrum.TooltipBead.activeBead.closeTooltip();
  }
};


/**
 * @protected
 * @type {com.unhurdle.spectrum.Tooltip}
 */
com.unhurdle.spectrum.TooltipBead.prototype.tt = null;


/**
 * @protected
 * @type {org.apache.royale.core.IPopUpHost}
 */
com.unhurdle.spectrum.TooltipBead.prototype.host = null;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__autoClose = 2000;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__delay = 0;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__stayOpen = 0;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__coolDown = 0;


/**
 * @private
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__toolTip = null;


/**
 * @private
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__direction = null;


/**
 * @private
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead__tipPosition = null;


/**
 * @protected
 * @type {org.apache.royale.core.IStrand}
 */
com.unhurdle.spectrum.TooltipBead.prototype._strand = null;


/**
 * @protected
 * @param {org.apache.royale.events.MouseEvent} event
 */
com.unhurdle.spectrum.TooltipBead.prototype.rollOverHandler = function(event) {
  if (!this.toolTip || this.tt) {
    return;
  }
  this._strand.addEventListener("mouseleave", org.apache.royale.utils.Language.closure(this.rollOutHandler, this, 'rollOutHandler'), false);
  if (com.unhurdle.spectrum.TooltipBead.activeBead == this && this.tt && this.tt.isOpen) {
    this.com_unhurdle_spectrum_TooltipBead_clearTimeouts();
    if (this.com_unhurdle_spectrum_TooltipBead__autoClose > 0) {
      this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId = setTimeout(org.apache.royale.utils.Language.closure(this.closeTooltip, this, 'closeTooltip'), this.com_unhurdle_spectrum_TooltipBead__autoClose);
    }
  } else if (this.delay == 0 || new Date().getTime() - com.unhurdle.spectrum.TooltipBead.lastShownTS < this.coolDown) {
    this.showTooltip();
  } else {
    this.com_unhurdle_spectrum_TooltipBead_showTimeoutId = setTimeout(org.apache.royale.utils.Language.closure(this.showTooltip, this, 'showTooltip'), this.delay);
  }
};


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead_showTimeoutId = 0;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead_closeTimeoutId = 0;


/**
 * @private
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead_stayOpenTimeoutId = 0;


/**
 * @private
 */
com.unhurdle.spectrum.TooltipBead.prototype.com_unhurdle_spectrum_TooltipBead_clearTimeouts = function() {
  if (this.com_unhurdle_spectrum_TooltipBead_showTimeoutId > 0) {
    clearTimeout(this.com_unhurdle_spectrum_TooltipBead_showTimeoutId);
    this.com_unhurdle_spectrum_TooltipBead_showTimeoutId = 0;
  }
  if (this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId > 0) {
    clearTimeout(this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId);
    this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId = 0;
  }
  if (this.com_unhurdle_spectrum_TooltipBead_stayOpenTimeoutId > 0) {
    clearTimeout(this.com_unhurdle_spectrum_TooltipBead_stayOpenTimeoutId);
    this.com_unhurdle_spectrum_TooltipBead_stayOpenTimeoutId = 0;
  }
};


/**
 * @protected
 */
com.unhurdle.spectrum.TooltipBead.prototype.showTooltip = function() {
  if (com.unhurdle.spectrum.TooltipBead.activeBead && com.unhurdle.spectrum.TooltipBead.activeBead != this) {
    com.unhurdle.spectrum.TooltipBead.activeBead.closeTooltip();
  }
  com.unhurdle.spectrum.TooltipBead.activeBead = this;
  var /** @type {org.apache.royale.core.IUIBase} */ comp = this._strand;
  this.host = org.apache.royale.utils.UIUtils.findPopUpHost(comp);
  this.removeTooltip();
  this.tt = new com.unhurdle.spectrum.Tooltip();
  this.tt.direction = this.com_unhurdle_spectrum_TooltipBead__direction;
  if (this.tipPosition) {
    this.tt.tipPosition = this.tipPosition;
  }
  this.tt.setStyle("position", "absolute");
  this.tt.text = this.toolTip;
  this.host.popUpParent.addElement(this.tt, false);
  var /** @type {number} */ ttWidth = this.tt.width;
  var /** @type {org.apache.royale.geom.Point} */ pt = this.determinePosition(this._strand, this.tt);
  this.tt.x = pt.x;
  this.tt.y = pt.y;
  this.tt.isOpen = true;
  if (ttWidth != this.tt.width) {
    pt = this.determinePosition(this._strand, this.tt);
    this.tt.x = pt.x;
    this.tt.y = pt.y;
  }
  if (this.com_unhurdle_spectrum_TooltipBead__autoClose > 0) {
    this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId = setTimeout(org.apache.royale.utils.Language.closure(this.closeTooltip, this, 'closeTooltip'), this.com_unhurdle_spectrum_TooltipBead__autoClose);
  }
};


/**
 * @protected
 * @param {org.apache.royale.core.IUIBase} comp
 * @param {com.unhurdle.spectrum.Tooltip} tooltip
 * @return {org.apache.royale.geom.Point}
 */
com.unhurdle.spectrum.TooltipBead.prototype.determinePosition = function(comp, tooltip) {
  var /** @type {org.apache.royale.geom.Point} */ pt = new org.apache.royale.geom.Point();
  if (this.com_unhurdle_spectrum_TooltipBead__direction == com.unhurdle.spectrum.TooltipBead.LEFT) {
    pt.x = -tooltip.width;
    pt.y = (comp.height - tooltip.height) / 2;
  } else if (this.com_unhurdle_spectrum_TooltipBead__direction == com.unhurdle.spectrum.TooltipBead.TOP) {
    pt.x = (comp.width - tooltip.width) / 2;
    pt.y = -tooltip.height;
  } else if (this.com_unhurdle_spectrum_TooltipBead__direction == com.unhurdle.spectrum.TooltipBead.RIGHT) {
    pt.x = comp.width;
    pt.y = (comp.height - tooltip.height) / 2;
  } else {
    pt.x = (comp.width - tooltip.width) / 2;
    pt.y = comp.height;
  }
  pt = org.apache.royale.utils.PointUtils.localToGlobal(pt, comp);
  return pt;
};


/**
 * @protected
 * @param {org.apache.royale.events.MouseEvent} event
 */
com.unhurdle.spectrum.TooltipBead.prototype.rollOutHandler = function(event) {
  this._strand.removeEventListener("mouseleave", org.apache.royale.utils.Language.closure(this.rollOutHandler, this, 'rollOutHandler'), false);
  this.com_unhurdle_spectrum_TooltipBead_clearTimeouts();
  if (this.stayOpen > 0) {
    this.com_unhurdle_spectrum_TooltipBead_stayOpenTimeoutId = setTimeout(org.apache.royale.utils.Language.closure(this.closeTooltip, this, 'closeTooltip'), this.stayOpen);
  } else {
    this.closeTooltip();
  }
};


/**
 * @protected
 */
com.unhurdle.spectrum.TooltipBead.prototype.closeTooltip = function() {
  this.com_unhurdle_spectrum_TooltipBead_clearTimeouts();
  com.unhurdle.spectrum.TooltipBead.activeBead = null;
  this.removeTooltip();
  var /** @type {org.apache.royale.core.IUIBase} */ comp = this._strand;
  this.com_unhurdle_spectrum_TooltipBead_closeTimeoutId = 0;
  this.com_unhurdle_spectrum_TooltipBead_showTimeoutId = 0;
  com.unhurdle.spectrum.TooltipBead.lastShownTS = new Date().getTime();
};


/**
 * @protected
 */
com.unhurdle.spectrum.TooltipBead.prototype.removeTooltip = function() {
  if (this.tt && this.tt.parent) {
    this.tt.parent.removeElement(this.tt);
  }
  this.tt = null;
};


/**
 * @nocollapse
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.lastShownTS = 0;


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.autoClose;


com.unhurdle.spectrum.TooltipBead.prototype.get__autoClose = function() {
  return this.com_unhurdle_spectrum_TooltipBead__autoClose;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__autoClose = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__autoClose = value;
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.delay;


com.unhurdle.spectrum.TooltipBead.prototype.get__delay = function() {
  return this.com_unhurdle_spectrum_TooltipBead__delay;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__delay = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__delay = value;
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.stayOpen;


com.unhurdle.spectrum.TooltipBead.prototype.get__stayOpen = function() {
  return this.com_unhurdle_spectrum_TooltipBead__stayOpen;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__stayOpen = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__stayOpen = value;
};


/**
 * @nocollapse
 * @export
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.coolDown;


com.unhurdle.spectrum.TooltipBead.prototype.get__coolDown = function() {
  return this.com_unhurdle_spectrum_TooltipBead__coolDown;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__coolDown = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__coolDown = value;
};


/**
 * @nocollapse
 * @export
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.toolTip;


com.unhurdle.spectrum.TooltipBead.prototype.get__toolTip = function() {
  return this.com_unhurdle_spectrum_TooltipBead__toolTip;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__toolTip = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__toolTip = value;
};


/**
 * @nocollapse
 * @export
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.direction;


com.unhurdle.spectrum.TooltipBead.prototype.get__direction = function() {
  return this.com_unhurdle_spectrum_TooltipBead__direction;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__direction = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__direction = value;
  if (this.tt) {
    this.tt.direction = value;
  }
};


/**
 * @nocollapse
 * @export
 * @type {string}
 */
com.unhurdle.spectrum.TooltipBead.prototype.tipPosition;


com.unhurdle.spectrum.TooltipBead.prototype.get__tipPosition = function() {
  return this.com_unhurdle_spectrum_TooltipBead__tipPosition;
};


com.unhurdle.spectrum.TooltipBead.prototype.set__tipPosition = function(value) {
  this.com_unhurdle_spectrum_TooltipBead__tipPosition = value;
  if (this.tt) {
    this.tt.tipPosition = value;
  }
};


/**
 * @nocollapse
 * @export
 * @type {org.apache.royale.core.IStrand}
 */
com.unhurdle.spectrum.TooltipBead.prototype.strand;


com.unhurdle.spectrum.TooltipBead.prototype.set__strand = function(value) {
  this._strand = value;
  this._strand.addEventListener("mouseenter", org.apache.royale.utils.Language.closure(this.rollOverHandler, this, 'rollOverHandler'), false);
};


Object.defineProperties(com.unhurdle.spectrum.TooltipBead.prototype, /** @lends {com.unhurdle.spectrum.TooltipBead.prototype} */ {
/**
 * @type {number}
 */
autoClose: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__autoClose,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__autoClose},
/**
 * @type {number}
 */
delay: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__delay,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__delay},
/**
 * @type {number}
 */
stayOpen: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__stayOpen,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__stayOpen},
/**
 * @type {number}
 */
coolDown: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__coolDown,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__coolDown},
/**
 * @type {string}
 */
toolTip: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__toolTip,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__toolTip},
/**
 * @type {string}
 */
direction: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__direction,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__direction},
/**
 * @type {string}
 */
tipPosition: {
get: com.unhurdle.spectrum.TooltipBead.prototype.get__tipPosition,
set: com.unhurdle.spectrum.TooltipBead.prototype.set__tipPosition},
/**
 * @type {org.apache.royale.core.IStrand}
 */
strand: {
set: com.unhurdle.spectrum.TooltipBead.prototype.set__strand}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
com.unhurdle.spectrum.TooltipBead.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'TooltipBead', qName: 'com.unhurdle.spectrum.TooltipBead', kind: 'class' }], interfaces: [org.apache.royale.core.IBead] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
com.unhurdle.spectrum.TooltipBead.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    variables: function () {
      return {
        '|lastShownTS': { type: 'Number', get_set: function (/** * */ v) {return v !== undefined ? com.unhurdle.spectrum.TooltipBead.lastShownTS = v : com.unhurdle.spectrum.TooltipBead.lastShownTS;}}
      };
    },
    accessors: function () {
      return {
        'autoClose': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'delay': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'stayOpen': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'coolDown': { type: 'Number', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'toolTip': { type: 'String', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'direction': { type: 'String', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'tipPosition': { type: 'String', access: 'readwrite', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        'strand': { type: 'org.apache.royale.core.IStrand', access: 'writeonly', declaredBy: 'com.unhurdle.spectrum.TooltipBead'}
      };
    },
    methods: function () {
      return {
        'TooltipBead': { type: '', declaredBy: 'com.unhurdle.spectrum.TooltipBead'},
        '|closeTips': { type: 'void', declaredBy: 'com.unhurdle.spectrum.TooltipBead'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
com.unhurdle.spectrum.TooltipBead.prototype.ROYALE_COMPILE_FLAGS = 11;
/**
 * Provide reflection support for distinguishing dynamic fields on class object (static)
 * @const
 * @type {Array<string>}
 */
com.unhurdle.spectrum.TooltipBead.prototype.ROYALE_INITIAL_STATICS = Object.keys(com.unhurdle.spectrum.TooltipBead);
