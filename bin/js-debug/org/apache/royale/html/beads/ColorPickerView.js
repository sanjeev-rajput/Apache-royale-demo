/**
 * Generated by Apache Royale Compiler from org/apache/royale/html/beads/ColorPickerView.as
 * org.apache.royale.html.beads.ColorPickerView
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('org.apache.royale.html.beads.ColorPickerView');
/* Royale Dependency List: org.apache.royale.core.IColorModel,org.apache.royale.core.IPopUp,org.apache.royale.core.IPopUpHost,org.apache.royale.core.IRenderedObject,org.apache.royale.core.IStrand,org.apache.royale.core.IStrandWithModel,org.apache.royale.core.IStyleableObject,org.apache.royale.core.IUIBase,org.apache.royale.core.UIBase,org.apache.royale.events.Event,org.apache.royale.events.IEventDispatcher,org.apache.royale.geom.Point,org.apache.royale.html.Group,org.apache.royale.html.TextButton,org.apache.royale.html.supportClasses.IColorPickerPopUp,org.apache.royale.html.util.getModelByType,org.apache.royale.utils.CSSUtils,org.apache.royale.utils.PointUtils,org.apache.royale.utils.UIUtils,org.apache.royale.utils.loadBeadFromValuesManager,org.apache.royale.utils.Language,XML*/

goog.require('org.apache.royale.core.BeadViewBase');
goog.require('org.apache.royale.html.beads.IComboBoxView');



/**
 * @constructor
 * @extends {org.apache.royale.core.BeadViewBase}
 * @implements {org.apache.royale.html.beads.IComboBoxView}
 */
org.apache.royale.html.beads.ColorPickerView = function() {
  org.apache.royale.html.beads.ColorPickerView.base(this, 'constructor');
};
goog.inherits(org.apache.royale.html.beads.ColorPickerView, org.apache.royale.core.BeadViewBase);


/**
 * @protected
 * @type {org.apache.royale.core.IUIBase}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.selectedColorDisplay;


/**
 * @private
 * @type {org.apache.royale.html.TextButton}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.org_apache_royale_html_beads_ColorPickerView_button;


/**
 * @private
 * @type {org.apache.royale.core.IUIBase}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.org_apache_royale_html_beads_ColorPickerView_list;


/**
 * @asprivate
 * @protected
 * @param {org.apache.royale.events.Event} event
 */
org.apache.royale.html.beads.ColorPickerView.prototype.handleSizeChange = function(event) {
  this.sizeChangeAction();
};


/**
 * @asprivate
 * @protected
 * @param {org.apache.royale.events.Event} event
 */
org.apache.royale.html.beads.ColorPickerView.prototype.handleColorChange = function(event) {
  this.colorChangeAction();
};


/**
 * @asprivate
 * @royaleignorecoercion org.apache.royale.core.IColorModel
 * @protected
 */
org.apache.royale.html.beads.ColorPickerView.prototype.colorChangeAction = function() {
  var /** @type {Object} */ model = org.apache.royale.html.util.getModelByType(this._strand, org.apache.royale.core.IColorModel);
  this.selectedColorDisplay.element.style.backgroundColor = org.apache.royale.utils.CSSUtils.attributeFromColor((model.color) >>> 0);
};


/**
 * @asprivate
 * @royaleignorecoercion org.apache.royale.core.UIBase
 * @protected
 */
org.apache.royale.html.beads.ColorPickerView.prototype.sizeChangeAction = function() {
  var /** @type {Object} */ host = this._strand;
  this.selectedColorDisplay.x = 0;
  this.selectedColorDisplay.y = 0;
  this.selectedColorDisplay.height = 20;
  if (host.isWidthSizedToContent()) {
    this.selectedColorDisplay.width = 25;
  } else {
    this.selectedColorDisplay.width = host.width - 20;
  }
  this.org_apache_royale_html_beads_ColorPickerView_button.x = this.selectedColorDisplay.width;
  this.org_apache_royale_html_beads_ColorPickerView_button.y = 0;
  this.org_apache_royale_html_beads_ColorPickerView_button.width = 20;
  this.org_apache_royale_html_beads_ColorPickerView_button.height = this.selectedColorDisplay.height;
  this.selectedColorDisplay.element.style.position = "absolute";
  this.org_apache_royale_html_beads_ColorPickerView_button.element.style.position = "absolute";
  if (host.isHeightSizedToContent()) {
    host.height = this.selectedColorDisplay.height;
  }
  if (host.isWidthSizedToContent()) {
    host.width = this.selectedColorDisplay.width + this.org_apache_royale_html_beads_ColorPickerView_button.width;
  }
};


/**
 * @nocollapse
 * @export
 * @type {Object}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.textInputField;


org.apache.royale.html.beads.ColorPickerView.prototype.get__textInputField = function() {
  return this.selectedColorDisplay;
};


/**
 * @nocollapse
 * @export
 * @type {Object}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.popupButton;


org.apache.royale.html.beads.ColorPickerView.prototype.get__popupButton = function() {
  return this.org_apache_royale_html_beads_ColorPickerView_button;
};


/**
 * @nocollapse
 * @export
 * @type {Object}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.popUp;


org.apache.royale.html.beads.ColorPickerView.prototype.get__popUp = function() {
  return this.org_apache_royale_html_beads_ColorPickerView_list;
};


org.apache.royale.html.beads.ColorPickerView.prototype.set__strand = function(value) {
  org.apache.royale.html.beads.ColorPickerView.superClass_.set__strand.apply(this, [value]);
  var /** @type {Object} */ host = value;
  this.selectedColorDisplay = new org.apache.royale.html.Group();
  org.apache.royale.utils.Language.as(this.selectedColorDisplay, org.apache.royale.core.IStyleableObject).className = "ColorPickerDisplayedColor";
  this.org_apache_royale_html_beads_ColorPickerView_button = new org.apache.royale.html.TextButton();
  this.org_apache_royale_html_beads_ColorPickerView_button.style = {"padding":0, "margin":0};
  this.org_apache_royale_html_beads_ColorPickerView_button.text = 'â–¼';
  if (isNaN(host.width))
    this.selectedColorDisplay.width = 25;
  if (!host.element.style.position) {
    host.element.style.position = "relative";
  }
  host.addElement(this.selectedColorDisplay);
  host.addElement(this.org_apache_royale_html_beads_ColorPickerView_button);
  org.apache.royale.utils.loadBeadFromValuesManager(org.apache.royale.core.IPopUp, "iPopUp", this._strand);
  this.org_apache_royale_html_beads_ColorPickerView_list = org.apache.royale.utils.Language.as(this._strand.getBeadByType(org.apache.royale.html.supportClasses.IColorPickerPopUp), org.apache.royale.core.IUIBase);
  this.org_apache_royale_html_beads_ColorPickerView_list.visible = false;
  var /** @type {org.apache.royale.events.IEventDispatcher} */ model = org.apache.royale.utils.Language.as(this._strand, org.apache.royale.core.IStrandWithModel).model;
  org.apache.royale.utils.Language.as(this.org_apache_royale_html_beads_ColorPickerView_list, org.apache.royale.html.supportClasses.IColorPickerPopUp).model = model;
  model.addEventListener("change", org.apache.royale.utils.Language.closure(this.handleColorChange, this, 'handleColorChange'));
  this._strand.addEventListener("sizeChanged", org.apache.royale.utils.Language.closure(this.handleSizeChange, this, 'handleSizeChange'));
  this.colorChangeAction();
  this.sizeChangeAction();
};


/**
 * @nocollapse
 * @export
 * @type {boolean}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.popUpVisible;


org.apache.royale.html.beads.ColorPickerView.prototype.get__popUpVisible = function() {
  if (this.org_apache_royale_html_beads_ColorPickerView_list)
    return this.org_apache_royale_html_beads_ColorPickerView_list.visible;
  else
    return false;
};


org.apache.royale.html.beads.ColorPickerView.prototype.set__popUpVisible = function(value) {
  if (value && !this.org_apache_royale_html_beads_ColorPickerView_list.visible) {
    var /** @type {org.apache.royale.core.IColorModel} */ model = org.apache.royale.utils.Language.as(org.apache.royale.html.util.getModelByType(this._strand, org.apache.royale.core.IColorModel), org.apache.royale.core.IColorModel);
    org.apache.royale.utils.Language.as(this.org_apache_royale_html_beads_ColorPickerView_list, org.apache.royale.html.supportClasses.IColorPickerPopUp).model = model;
    this.org_apache_royale_html_beads_ColorPickerView_list.visible = true;
    var /** @type {org.apache.royale.geom.Point} */ origin = new org.apache.royale.geom.Point(0, this.org_apache_royale_html_beads_ColorPickerView_button.y + this.org_apache_royale_html_beads_ColorPickerView_button.height);
    var /** @type {org.apache.royale.geom.Point} */ relocated = org.apache.royale.utils.PointUtils.localToGlobal(origin, this._strand);
    this.org_apache_royale_html_beads_ColorPickerView_list.x = relocated.x;
    this.org_apache_royale_html_beads_ColorPickerView_list.y = relocated.y;
    org.apache.royale.utils.Language.as(this.org_apache_royale_html_beads_ColorPickerView_list, org.apache.royale.core.IRenderedObject).element.style.position = "absolute";
    var /** @type {org.apache.royale.core.IPopUpHost} */ popupHost = org.apache.royale.utils.UIUtils.findPopUpHost(this._strand);
    popupHost.popUpParent.addElement(this.org_apache_royale_html_beads_ColorPickerView_list);
  } else if (this.org_apache_royale_html_beads_ColorPickerView_list.visible) {
    org.apache.royale.utils.UIUtils.removePopUp(this.org_apache_royale_html_beads_ColorPickerView_list);
    this.org_apache_royale_html_beads_ColorPickerView_list.visible = false;
  }
};


Object.defineProperties(org.apache.royale.html.beads.ColorPickerView.prototype, /** @lends {org.apache.royale.html.beads.ColorPickerView.prototype} */ {
/**
 * @type {Object}
 */
textInputField: {
get: org.apache.royale.html.beads.ColorPickerView.prototype.get__textInputField},
/**
 * @type {Object}
 */
popupButton: {
get: org.apache.royale.html.beads.ColorPickerView.prototype.get__popupButton},
/**
 * @type {Object}
 */
popUp: {
get: org.apache.royale.html.beads.ColorPickerView.prototype.get__popUp},
/**
 * @type {org.apache.royale.core.IStrand}
 */
strand: {
set: org.apache.royale.html.beads.ColorPickerView.prototype.set__strand},
/**
 * @type {boolean}
 */
popUpVisible: {
get: org.apache.royale.html.beads.ColorPickerView.prototype.get__popUpVisible,
set: org.apache.royale.html.beads.ColorPickerView.prototype.set__popUpVisible}}
);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'ColorPickerView', qName: 'org.apache.royale.html.beads.ColorPickerView', kind: 'class' }], interfaces: [org.apache.royale.html.beads.IComboBoxView] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    accessors: function () {
      return {
        'textInputField': { type: 'Object', access: 'readonly', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'},
        'popupButton': { type: 'Object', access: 'readonly', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'},
        'popUp': { type: 'Object', access: 'readonly', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'},
        'strand': { type: 'org.apache.royale.core.IStrand', access: 'writeonly', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'},
        'popUpVisible': { type: 'Boolean', access: 'readwrite', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'}
      };
    },
    methods: function () {
      return {
        'ColorPickerView': { type: '', declaredBy: 'org.apache.royale.html.beads.ColorPickerView'}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
org.apache.royale.html.beads.ColorPickerView.prototype.ROYALE_COMPILE_FLAGS = 10;

//# sourceMappingURL=./ColorPickerView.js.map
