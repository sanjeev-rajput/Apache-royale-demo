/**
 * Generated by Apache Royale Compiler from org/apache/royale/textLayout/property/TabStopsProperty.as
 * org.apache.royale.textLayout.property.TabStopsProperty
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('org.apache.royale.textLayout.property.TabStopsProperty');
/* Royale Dependency List: org.apache.royale.textLayout.formats.FormatValue,org.apache.royale.textLayout.formats.TabStopFormat,org.apache.royale.textLayout.property.PropertyUtil,XML*/
/* Royale Static Dependency List: org.apache.royale.utils.Language*/

goog.require('org.apache.royale.textLayout.property.ArrayProperty');
goog.require('org.apache.royale.utils.Language');



/**
 * @constructor
 * @extends {org.apache.royale.textLayout.property.ArrayProperty}
 * @param {string} nameValue
 * @param {Array} defaultValue
 * @param {boolean} inherited
 * @param {Array} categories
 */
org.apache.royale.textLayout.property.TabStopsProperty = function(nameValue, defaultValue, inherited, categories) {
  org.apache.royale.textLayout.property.TabStopsProperty.base(this, 'constructor', nameValue, defaultValue, inherited, categories, org.apache.royale.textLayout.formats.TabStopFormat);
};
goog.inherits(org.apache.royale.textLayout.property.TabStopsProperty, org.apache.royale.textLayout.property.ArrayProperty);


/** Helper function when setting the property 
 * @override
 */
org.apache.royale.textLayout.property.TabStopsProperty.prototype.setHelper = function(currVal, newVal) {
  if (newVal == null || newVal == org.apache.royale.textLayout.formats.FormatValue.INHERIT)
    return newVal;
  var /** @type {Array} */ tabStops;
  if (org.apache.royale.utils.Language.is(newVal, Array)) {
    tabStops = newVal;
    if (!this.checkArrayTypes(tabStops)) {
      org.apache.royale.textLayout.property.PropertyUtil.errorHandler(this, newVal);
      return currVal;
    }
  } else {
    var /** @type {string} */ valString = newVal;
    if (!valString) {
      org.apache.royale.textLayout.property.PropertyUtil.errorHandler(this, newVal);
      return currVal;
    }
    tabStops = [];
    valString = valString.replace(org.apache.royale.textLayout.property.TabStopsProperty._escapeBackslashRegex, org.apache.royale.textLayout.property.TabStopsProperty._backslashPlaceHolder);
    valString = valString.replace(org.apache.royale.textLayout.property.TabStopsProperty._escapeSpaceRegex, org.apache.royale.textLayout.property.TabStopsProperty._spacePlaceHolder);
    org.apache.royale.textLayout.property.TabStopsProperty._tabStopRegex.lastIndex = 0;
    var /** @type {Object} */ lookup = {"s":"start", "c":"center", "e":"end", "d":"decimal"};
    do {
      var /** @type {Object} */ result = org.apache.royale.textLayout.property.TabStopsProperty._tabStopRegex.exec(valString);
      if (!result)
        break;
      var /** @type {org.apache.royale.textLayout.formats.TabStopFormat} */ tabStop = new org.apache.royale.textLayout.formats.TabStopFormat();
      tabStop.alignment = lookup[result[1].toLowerCase()] || "start";
      var /** @type {number} */ position = Number(result[2]);
      if (isNaN(position)) {
        org.apache.royale.textLayout.property.PropertyUtil.errorHandler(this, newVal);
        return currVal;
      }
      tabStop.position = position;
      if (tabStop.alignment == "decimal") {
        if (result[3] == "")
          tabStop.decimalAlignmentToken = "."; else {
          tabStop.decimalAlignmentToken = result[3].slice(1).replace(org.apache.royale.textLayout.property.TabStopsProperty._backslashPlaceholderRegex, "\\");
          tabStop.decimalAlignmentToken = tabStop.decimalAlignmentToken.replace(org.apache.royale.textLayout.property.TabStopsProperty._spacePlaceholderRegex, " ");
        }
      } else if (result[3]) {
        org.apache.royale.textLayout.property.PropertyUtil.errorHandler(this, newVal);
        return currVal;
      }
      tabStops.push(tabStop);
    } while (true);
  }
  return tabStops.sort(org.apache.royale.textLayout.property.TabStopsProperty.compareTabStopFormats);
};


/** @asprivate 
 * @override
 */
org.apache.royale.textLayout.property.TabStopsProperty.prototype.toXMLString = function(val) {
  var /** @type {string} */ str = "";
  var /** @type {Object} */ lookup = {"start":"s", "center":"c", "end":"e", "decimal":"d"};
  var /** @type {Array} */ tabStops = val;
  var foreachiter0_target = tabStops;
  for (var foreachiter0 in foreachiter0_target) 
  {
  var tabStop = foreachiter0_target[foreachiter0];
  {
    if (str.length)
      str += " ";
    str += org.apache.royale.utils.Language.string(lookup[tabStop.alignment]);
    str += tabStop.position.toString();
    if (tabStop.alignment == "decimal") {
      var /** @type {string} */ escapedAlignmentToken = org.apache.royale.utils.Language.string(tabStop.decimalAlignmentToken.replace(org.apache.royale.textLayout.property.TabStopsProperty._backslashRegex, "\\\\"));
      escapedAlignmentToken = escapedAlignmentToken.replace(org.apache.royale.textLayout.property.TabStopsProperty._spaceRegex, "\\ ");
      str += "|" + escapedAlignmentToken;
    }
  }}
  
  return str;
};


/**
 * @private
 * @param {org.apache.royale.textLayout.formats.TabStopFormat} a
 * @param {org.apache.royale.textLayout.formats.TabStopFormat} b
 * @return {number}
 */
org.apache.royale.textLayout.property.TabStopsProperty.compareTabStopFormats = function(a, b) {
  return a.position == b.position ? 0 : a.position < b.position ? -1 : 1;
};


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._tabStopRegex = /([sScCeEdD]?)([^|\u0020]+)(|[^\u0020]*)?(\u0020|$)/g;


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._escapeBackslashRegex = /\\\\/g;


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._escapeSpaceRegex = /\\\u0020/g;


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._backslashRegex = /\\/g;


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._spaceRegex = /\u0020/g;


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._backslashPlaceholderRegex = new RegExp("\\" + "uE000", "g");


/**
 * @private
 * @const
 * @type {RegExp}
 */
org.apache.royale.textLayout.property.TabStopsProperty._spacePlaceholderRegex = new RegExp("\\" + "uE001", "g");


/**
 * @private
 * @const
 * @type {string}
 */
org.apache.royale.textLayout.property.TabStopsProperty._backslashPlaceHolder = String.fromCharCode(0xE000);


/**
 * @private
 * @const
 * @type {string}
 */
org.apache.royale.textLayout.property.TabStopsProperty._spacePlaceHolder = String.fromCharCode(0xE001);


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
org.apache.royale.textLayout.property.TabStopsProperty.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'TabStopsProperty', qName: 'org.apache.royale.textLayout.property.TabStopsProperty', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
org.apache.royale.textLayout.property.TabStopsProperty.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    methods: function () {
      return {
        'TabStopsProperty': { type: '', declaredBy: 'org.apache.royale.textLayout.property.TabStopsProperty', parameters: function () { return [ 'String', false ,'Array', false ,'Boolean', false ,'Vector.<String>', false ]; }},
        'setHelper': { type: '*', declaredBy: 'org.apache.royale.textLayout.property.TabStopsProperty', parameters: function () { return [ '*', false ,'*', false ]; }},
        'toXMLString': { type: 'String', declaredBy: 'org.apache.royale.textLayout.property.TabStopsProperty', parameters: function () { return [ 'Object', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
org.apache.royale.textLayout.property.TabStopsProperty.prototype.ROYALE_COMPILE_FLAGS = 10;

//# sourceMappingURL=./TabStopsProperty.js.map
