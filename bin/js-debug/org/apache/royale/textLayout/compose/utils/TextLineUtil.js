/**
 * Generated by Apache Royale Compiler from org/apache/royale/textLayout/compose/utils/TextLineUtil.as
 * org.apache.royale.textLayout.compose.utils.TextLineUtil
 *
 * @fileoverview
 *
 * @suppress {missingRequire|checkTypes|accessControls}
 */

goog.provide('org.apache.royale.textLayout.compose.utils.TextLineUtil');
/* Royale Dependency List: org.apache.royale.text.engine.ITextLine,org.apache.royale.text.engine.TextBaseline,org.apache.royale.textLayout.compose.utils.NumberLineUserData,org.apache.royale.textLayout.elements.IBackgroundManager,org.apache.royale.textLayout.elements.IFlowLeafElement,org.apache.royale.textLayout.elements.IInlineGraphicElement,org.apache.royale.textLayout.elements.IListItemElement,org.apache.royale.textLayout.elements.IParagraphElement,org.apache.royale.textLayout.formats.BlockProgression,org.apache.royale.textLayout.formats.Direction,org.apache.royale.textLayout.formats.FormatValue,org.apache.royale.textLayout.formats.IListMarkerFormat,org.apache.royale.textLayout.formats.ITextLayoutFormat,org.apache.royale.textLayout.formats.ListStylePosition,org.apache.royale.utils.Language,XML*/




/**
 * @constructor
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil = function() {
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} textLine
 * @return {org.apache.royale.text.engine.ITextLine}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.findNumberLine = function(textLine) {
  return textLine.numberLine;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {string}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineListStylePosition = function(numberLine) {
  return numberLine.userData.listStylePosition;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {number}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineInsideLineWidth = function(numberLine) {
  return numberLine.userData.insideLineWidth;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {org.apache.royale.textLayout.formats.ITextLayoutFormat}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineSpanFormat = function(numberLine) {
  return numberLine.userData.spanFormat;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {string}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineParagraphDirection = function(numberLine) {
  return numberLine.userData.paragraphDirection;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @param {number} listEndIndent
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.setListEndIndent = function(numberLine, listEndIndent) {
  numberLine.userData.listEndIndent = listEndIndent;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {number}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getListEndIndent = function(numberLine) {
  return numberLine.userData.listEndIndent;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @param {org.apache.royale.textLayout.elements.IBackgroundManager} background
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.setNumberLineBackground = function(numberLine, background) {
  numberLine.userData.backgroundManager = background;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @return {org.apache.royale.textLayout.elements.IBackgroundManager}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineBackground = function(numberLine) {
  return numberLine.userData.backgroundManager;
};


/** @asprivate 
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} numberLine
 * @param {org.apache.royale.textLayout.elements.IListItemElement} listItemElement
 * @param {org.apache.royale.textLayout.elements.IParagraphElement} curParaElement
 * @param {number} totalWidth
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.initializeNumberLinePosition = function(numberLine, listItemElement, curParaElement, totalWidth) {
  var /** @type {org.apache.royale.textLayout.formats.IListMarkerFormat} */ listMarkerFormat = listItemElement.computedListMarkerFormat();
  var /** @type {org.apache.royale.textLayout.formats.ITextLayoutFormat} */ paragraphFormat = curParaElement.computedFormat;
  var /** @type {number} */ listEndIndent = Number(listMarkerFormat.paragraphEndIndent === undefined || listItemElement.computedFormat.listStylePosition == org.apache.royale.textLayout.formats.ListStylePosition.INSIDE ? 0 : (listMarkerFormat.paragraphEndIndent == org.apache.royale.textLayout.formats.FormatValue.INHERIT ? paragraphFormat.paragraphEndIndent : listMarkerFormat.paragraphEndIndent));
  org.apache.royale.textLayout.compose.utils.TextLineUtil.setListEndIndent(numberLine, listEndIndent);
  if (listItemElement.computedFormat.listStylePosition == org.apache.royale.textLayout.formats.ListStylePosition.OUTSIDE) {
    numberLine.x = numberLine.y = 0;
    return;
  }
  var /** @type {string} */ bp = org.apache.royale.utils.Language.string(curParaElement.getTextFlow().computedFormat.blockProgression);
  var /** @type {number} */ numberLineWidth = org.apache.royale.textLayout.compose.utils.TextLineUtil.getNumberLineInsideLineWidth(numberLine);
  if (bp == org.apache.royale.textLayout.formats.BlockProgression.TB) {
    if (paragraphFormat.direction == org.apache.royale.textLayout.formats.Direction.LTR)
      numberLine.x = -numberLineWidth;
    else
      numberLine.x = totalWidth + numberLineWidth - numberLine.textWidth;
    numberLine.y = 0;
  } else {
    if (paragraphFormat.direction == org.apache.royale.textLayout.formats.Direction.LTR)
      numberLine.y = -numberLineWidth;
    else
      numberLine.y = totalWidth + numberLineWidth - numberLine.textWidth;
    numberLine.x = 0;
  }
};


/** @asprivate 
 * Scan through the format runs within the line, and figure out what the typographic ascent (i.e. ascent relative to the 
 * Roman baseline) for the overall line is. Normally it is the distance between the Roman and Ascent baselines, 
 * but it may be adjusted upwards by the width/height of the GraphicElement.
 * @nocollapse
 * @param {org.apache.royale.text.engine.ITextLine} textLine
 * @param {org.apache.royale.textLayout.elements.IFlowLeafElement} elem
 * @param {number} elemStart
 * @param {number} textLineEnd
 * @return {number}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.getTextLineTypographicAscent = function(textLine, elem, elemStart, textLineEnd) {
  
  var /** @type {number} */ rslt = textLine.getBaselinePosition(org.apache.royale.text.engine.TextBaseline.ROMAN) - textLine.getBaselinePosition(org.apache.royale.text.engine.TextBaseline.ASCENT);
  if (textLine.hasGraphicElement) {
    for (;;) {
      if (org.apache.royale.utils.Language.is(elem, org.apache.royale.textLayout.elements.IInlineGraphicElement))
        rslt = Math.max(rslt, org.apache.royale.utils.Language.as(elem, org.apache.royale.textLayout.elements.IInlineGraphicElement, true).getTypographicAscent(textLine));
      elemStart += elem.textLength;
      if (elemStart >= textLineEnd)
        break;
      elem = elem.getNextLeaf();
      
    }
  }
  return rslt;
};


/**
 * Metadata
 *
 * @type {Object.<string, Array.<Object>>}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.prototype.ROYALE_CLASS_INFO = { names: [{ name: 'TextLineUtil', qName: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', kind: 'class' }] };



/**
 * Reflection
 *
 * @return {Object.<string, Function>}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.prototype.ROYALE_REFLECTION_INFO = function () {
  return {
    methods: function () {
      return {
        '|findNumberLine': { type: 'org.apache.royale.text.engine.ITextLine', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|getNumberLineListStylePosition': { type: 'String', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|getNumberLineInsideLineWidth': { type: 'Number', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|getNumberLineSpanFormat': { type: 'org.apache.royale.textLayout.formats.ITextLayoutFormat', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|getNumberLineParagraphDirection': { type: 'String', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|setListEndIndent': { type: 'void', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ,'Number', false ]; }},
        '|getListEndIndent': { type: 'Number', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|setNumberLineBackground': { type: 'void', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ,'org.apache.royale.textLayout.elements.IBackgroundManager', false ]; }},
        '|getNumberLineBackground': { type: 'org.apache.royale.textLayout.elements.IBackgroundManager', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ]; }},
        '|initializeNumberLinePosition': { type: 'void', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ,'org.apache.royale.textLayout.elements.IListItemElement', false ,'org.apache.royale.textLayout.elements.IParagraphElement', false ,'Number', false ]; }},
        '|getTextLineTypographicAscent': { type: 'Number', declaredBy: 'org.apache.royale.textLayout.compose.utils.TextLineUtil', parameters: function () { return [ 'org.apache.royale.text.engine.ITextLine', false ,'org.apache.royale.textLayout.elements.IFlowLeafElement', false ,'int', false ,'int', false ]; }}
      };
    }
  };
};
/**
 * @const
 * @type {number}
 */
org.apache.royale.textLayout.compose.utils.TextLineUtil.prototype.ROYALE_COMPILE_FLAGS = 10;

//# sourceMappingURL=./TextLineUtil.js.map
